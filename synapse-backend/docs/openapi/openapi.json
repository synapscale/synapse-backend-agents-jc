{
  "openapi": "3.0.3",
  "info": {
    "title": "SynapScale Backend API",
    "description": "API para integração com múltiplos provedores de LLM (Large Language Models)",
    "version": "1.0.0",
    "contact": {
      "name": "SynapScale Team",
      "url": "https://github.com/synapscale/synapse-backend-agents-jc"
    },
    "license": {
      "name": "MIT",
      "url": "https://opensource.org/licenses/MIT"
    }
  },
  "servers": [
    {
      "url": "http://localhost:8000",
      "description": "Servidor de desenvolvimento local"
    },
    {
      "url": "https://api.synapscale.com",
      "description": "Servidor de produção"
    }
  ],
  "tags": [
    {
      "name": "auth",
      "description": "Operações de autenticação e autorização"
    },
    {
      "name": "llm",
      "description": "Operações relacionadas a modelos de linguagem"
    },
    {
      "name": "chat",
      "description": "Operações de chat e conversas"
    },
    {
      "name": "uploads",
      "description": "Operações de upload e gerenciamento de arquivos"
    },
    {
      "name": "marketplace",
      "description": "Operações de marketplace de ferramentas"
    },
    {
      "name": "agents",
      "description": "Operações de agentes de IA"
    },
    {
      "name": "health",
      "description": "Verificação de saúde do sistema"
    }
  ],
  "paths": {
    "/health": {
      "get": {
        "tags": ["health"],
        "summary": "Verificar saúde do sistema",
        "description": "Retorna o status de saúde de todos os componentes do sistema",
        "operationId": "getHealth",
        "responses": {
          "200": {
            "description": "Sistema saudável",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HealthResponse"
                },
                "example": {
                  "status": "healthy",
                  "version": "1.0.0",
                  "services": {
                    "api-gateway": "up",
                    "auth": "up",
                    "llm": "up",
                    "chat": "up",
                    "uploads": "up",
                    "marketplace": "up",
                    "agents": "up",
                    "database": "up"
                  }
                }
              }
            }
          },
          "500": {
            "description": "Erro interno do servidor",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/auth/token": {
      "post": {
        "tags": ["auth"],
        "summary": "Obter token de acesso",
        "description": "Autentica o usuário e retorna um token JWT para acesso à API",
        "operationId": "getToken",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/TokenRequest"
              },
              "example": {
                "username": "usuario@exemplo.com",
                "password": "senha123"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Token gerado com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TokenResponse"
                },
                "example": {
                  "access_token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
                  "token_type": "bearer",
                  "expires_in": 3600,
                  "refresh_token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
                  "scope": "read write"
                }
              }
            }
          },
          "401": {
            "description": "Credenciais inválidas",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "error": "invalid_credentials",
                  "error_description": "Usuário ou senha inválidos"
                }
              }
            }
          },
          "429": {
            "description": "Muitas tentativas de login",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "error": "too_many_attempts",
                  "error_description": "Muitas tentativas de login. Tente novamente em 15 minutos."
                }
              }
            }
          }
        }
      }
    },
    "/api/auth/refresh": {
      "post": {
        "tags": ["auth"],
        "summary": "Renovar token de acesso",
        "description": "Renova o token de acesso usando um refresh token válido",
        "operationId": "refreshToken",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/RefreshTokenRequest"
              },
              "example": {
                "refresh_token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Token renovado com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TokenResponse"
                }
              }
            }
          },
          "401": {
            "description": "Refresh token inválido ou expirado",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/llm/models": {
      "get": {
        "tags": ["llm"],
        "summary": "Listar modelos disponíveis",
        "description": "Retorna a lista de modelos de linguagem disponíveis",
        "operationId": "listModels",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "provider",
            "in": "query",
            "description": "Filtrar por provedor",
            "required": false,
            "schema": {
              "type": "string",
              "enum": ["openai", "anthropic", "google", "mistral"]
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Lista de modelos",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "models": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/Model"
                      }
                    }
                  }
                },
                "example": {
                  "models": [
                    {
                      "id": "gpt-4",
                      "name": "GPT-4",
                      "provider": "openai",
                      "capabilities": ["text", "code", "reasoning"],
                      "max_tokens": 8192
                    },
                    {
                      "id": "claude-3-opus",
                      "name": "Claude 3 Opus",
                      "provider": "anthropic",
                      "capabilities": ["text", "code", "reasoning", "vision"],
                      "max_tokens": 200000
                    }
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Não autorizado",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Acesso proibido",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/llm/completions": {
      "post": {
        "tags": ["llm"],
        "summary": "Gerar completions",
        "description": "Gera completions de texto usando o modelo especificado",
        "operationId": "createCompletion",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CompletionRequest"
              },
              "example": {
                "model": "gpt-4",
                "prompt": "Explique o conceito de inteligência artificial em termos simples.",
                "max_tokens": 500,
                "temperature": 0.7,
                "stream": false
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Completion gerada com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CompletionResponse"
                }
              }
            }
          },
          "400": {
            "description": "Parâmetros inválidos",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "401": {
            "description": "Não autorizado",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Acesso proibido",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "429": {
            "description": "Limite de requisições excedido",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/chat/conversations": {
      "get": {
        "tags": ["chat"],
        "summary": "Listar conversas",
        "description": "Retorna a lista de conversas do usuário",
        "operationId": "listConversations",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "page",
            "in": "query",
            "description": "Número da página",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 1,
              "minimum": 1
            }
          },
          {
            "name": "limit",
            "in": "query",
            "description": "Número de itens por página",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 10,
              "minimum": 1,
              "maximum": 100
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Lista de conversas",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "conversations": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/Conversation"
                      }
                    },
                    "total": {
                      "type": "integer"
                    },
                    "page": {
                      "type": "integer"
                    },
                    "limit": {
                      "type": "integer"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Não autorizado",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": ["chat"],
        "summary": "Criar nova conversa",
        "description": "Cria uma nova conversa",
        "operationId": "createConversation",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ConversationRequest"
              },
              "example": {
                "title": "Conversa sobre IA",
                "model": "gpt-4"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Conversa criada com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Conversation"
                }
              }
            }
          },
          "400": {
            "description": "Parâmetros inválidos",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "401": {
            "description": "Não autorizado",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/chat/conversations/{conversation_id}": {
      "get": {
        "tags": ["chat"],
        "summary": "Obter conversa",
        "description": "Retorna os detalhes de uma conversa específica",
        "operationId": "getConversation",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "conversation_id",
            "in": "path",
            "description": "ID da conversa",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Detalhes da conversa",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Conversation"
                }
              }
            }
          },
          "401": {
            "description": "Não autorizado",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "Conversa não encontrada",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": ["chat"],
        "summary": "Excluir conversa",
        "description": "Exclui uma conversa específica",
        "operationId": "deleteConversation",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "conversation_id",
            "in": "path",
            "description": "ID da conversa",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "204": {
            "description": "Conversa excluída com sucesso"
          },
          "401": {
            "description": "Não autorizado",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "Conversa não encontrada",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/chat/conversations/{conversation_id}/messages": {
      "get": {
        "tags": ["chat"],
        "summary": "Listar mensagens",
        "description": "Retorna a lista de mensagens de uma conversa",
        "operationId": "listMessages",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "conversation_id",
            "in": "path",
            "description": "ID da conversa",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "page",
            "in": "query",
            "description": "Número da página",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 1,
              "minimum": 1
            }
          },
          {
            "name": "limit",
            "in": "query",
            "description": "Número de itens por página",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 50,
              "minimum": 1,
              "maximum": 100
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Lista de mensagens",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "messages": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/Message"
                      }
                    },
                    "total": {
                      "type": "integer"
                    },
                    "page": {
                      "type": "integer"
                    },
                    "limit": {
                      "type": "integer"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Não autorizado",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "Conversa não encontrada",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": ["chat"],
        "summary": "Enviar mensagem",
        "description": "Envia uma nova mensagem para a conversa",
        "operationId": "sendMessage",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "conversation_id",
            "in": "path",
            "description": "ID da conversa",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/MessageRequest"
              },
              "example": {
                "content": "Qual é a capital do Brasil?",
                "model": "gpt-4",
                "stream": false
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Mensagem enviada com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Message"
                }
              }
            }
          },
          "400": {
            "description": "Parâmetros inválidos",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "401": {
            "description": "Não autorizado",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "Conversa não encontrada",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "429": {
            "description": "Limite de requisições excedido",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/uploads": {
      "get": {
        "tags": ["uploads"],
        "summary": "Listar arquivos",
        "description": "Retorna a lista de arquivos do usuário",
        "operationId": "listFiles",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "page",
            "in": "query",
            "description": "Número da página",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 1,
              "minimum": 1
            }
          },
          {
            "name": "limit",
            "in": "query",
            "description": "Número de itens por página",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 10,
              "minimum": 1,
              "maximum": 100
            }
          },
          {
            "name": "type",
            "in": "query",
            "description": "Filtrar por tipo de arquivo",
            "required": false,
            "schema": {
              "type": "string",
              "enum": ["image", "document", "audio", "video"]
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Lista de arquivos",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "files": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/File"
                      }
                    },
                    "total": {
                      "type": "integer"
                    },
                    "page": {
                      "type": "integer"
                    },
                    "limit": {
                      "type": "integer"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Não autorizado",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Acesso proibido",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": ["uploads"],
        "summary": "Fazer upload de arquivo",
        "description": "Faz upload de um novo arquivo",
        "operationId": "uploadFile",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "multipart/form-data": {
              "schema": {
                "type": "object",
                "properties": {
                  "file": {
                    "type": "string",
                    "format": "binary",
                    "description": "Arquivo a ser enviado"
                  },
                  "description": {
                    "type": "string",
                    "description": "Descrição do arquivo"
                  }
                },
                "required": ["file"]
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Arquivo enviado com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/File"
                }
              }
            }
          },
          "400": {
            "description": "Arquivo inválido",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "401": {
            "description": "Não autorizado",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Acesso proibido",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "413": {
            "description": "Arquivo muito grande",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "429": {
            "description": "Limite de requisições excedido",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/uploads/{file_id}": {
      "get": {
        "tags": ["uploads"],
        "summary": "Obter arquivo",
        "description": "Retorna os detalhes de um arquivo específico",
        "operationId": "getFile",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "file_id",
            "in": "path",
            "description": "ID do arquivo",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Detalhes do arquivo",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/File"
                }
              }
            }
          },
          "401": {
            "description": "Não autorizado",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Acesso proibido",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "Arquivo não encontrado",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": ["uploads"],
        "summary": "Excluir arquivo",
        "description": "Exclui um arquivo específico",
        "operationId": "deleteFile",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "file_id",
            "in": "path",
            "description": "ID do arquivo",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "204": {
            "description": "Arquivo excluído com sucesso"
          },
          "401": {
            "description": "Não autorizado",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Acesso proibido",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "Arquivo não encontrado",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/uploads/{file_id}/download": {
      "get": {
        "tags": ["uploads"],
        "summary": "Baixar arquivo",
        "description": "Baixa o conteúdo de um arquivo específico",
        "operationId": "downloadFile",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "file_id",
            "in": "path",
            "description": "ID do arquivo",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Conteúdo do arquivo",
            "content": {
              "application/octet-stream": {
                "schema": {
                  "type": "string",
                  "format": "binary"
                }
              }
            }
          },
          "401": {
            "description": "Não autorizado",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Acesso proibido",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "Arquivo não encontrado",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/marketplace/tools": {
      "get": {
        "tags": ["marketplace"],
        "summary": "Listar ferramentas",
        "description": "Retorna a lista de ferramentas disponíveis no marketplace",
        "operationId": "listTools",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "page",
            "in": "query",
            "description": "Número da página",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 1,
              "minimum": 1
            }
          },
          {
            "name": "limit",
            "in": "query",
            "description": "Número de itens por página",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 10,
              "minimum": 1,
              "maximum": 100
            }
          },
          {
            "name": "category",
            "in": "query",
            "description": "Filtrar por categoria",
            "required": false,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Lista de ferramentas",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "tools": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/Tool"
                      }
                    },
                    "total": {
                      "type": "integer"
                    },
                    "page": {
                      "type": "integer"
                    },
                    "limit": {
                      "type": "integer"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Não autorizado",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": ["marketplace"],
        "summary": "Criar ferramenta",
        "description": "Cria uma nova ferramenta no marketplace",
        "operationId": "createTool",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ToolRequest"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Ferramenta criada com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Tool"
                }
              }
            }
          },
          "400": {
            "description": "Parâmetros inválidos",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "401": {
            "description": "Não autorizado",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Acesso proibido",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/agents": {
      "get": {
        "tags": ["agents"],
        "summary": "Listar agentes",
        "description": "Retorna a lista de agentes disponíveis",
        "operationId": "listAgents",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "page",
            "in": "query",
            "description": "Número da página",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 1,
              "minimum": 1
            }
          },
          {
            "name": "limit",
            "in": "query",
            "description": "Número de itens por página",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 10,
              "minimum": 1,
              "maximum": 100
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Lista de agentes",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "agents": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/Agent"
                      }
                    },
                    "total": {
                      "type": "integer"
                    },
                    "page": {
                      "type": "integer"
                    },
                    "limit": {
                      "type": "integer"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Não autorizado",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": ["agents"],
        "summary": "Criar agente",
        "description": "Cria um novo agente",
        "operationId": "createAgent",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/AgentRequest"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Agente criado com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Agent"
                }
              }
            }
          },
          "400": {
            "description": "Parâmetros inválidos",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "401": {
            "description": "Não autorizado",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Acesso proibido",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/agents/{agent_id}/execute": {
      "post": {
        "tags": ["agents"],
        "summary": "Executar agente",
        "description": "Executa um agente com os parâmetros fornecidos",
        "operationId": "executeAgent",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "agent_id",
            "in": "path",
            "description": "ID do agente",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/AgentExecuteRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Resultado da execução do agente",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AgentExecuteResponse"
                }
              }
            }
          },
          "400": {
            "description": "Parâmetros inválidos",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "401": {
            "description": "Não autorizado",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Acesso proibido",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "Agente não encontrado",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "429": {
            "description": "Limite de requisições excedido",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "HealthResponse": {
        "type": "object",
        "properties": {
          "status": {
            "type": "string",
            "enum": ["healthy", "degraded", "unhealthy"],
            "description": "Status geral do sistema"
          },
          "version": {
            "type": "string",
            "description": "Versão do sistema"
          },
          "services": {
            "type": "object",
            "additionalProperties": {
              "type": "string",
              "enum": ["up", "down", "degraded"]
            },
            "description": "Status de cada serviço"
          }
        },
        "required": ["status", "version", "services"]
      },
      "TokenRequest": {
        "type": "object",
        "properties": {
          "username": {
            "type": "string",
            "description": "Nome de usuário ou email"
          },
          "password": {
            "type": "string",
            "description": "Senha do usuário"
          }
        },
        "required": ["username", "password"]
      },
      "RefreshTokenRequest": {
        "type": "object",
        "properties": {
          "refresh_token": {
            "type": "string",
            "description": "Token de atualização"
          }
        },
        "required": ["refresh_token"]
      },
      "TokenResponse": {
        "type": "object",
        "properties": {
          "access_token": {
            "type": "string",
            "description": "Token de acesso JWT"
          },
          "token_type": {
            "type": "string",
            "enum": ["bearer"],
            "description": "Tipo de token"
          },
          "expires_in": {
            "type": "integer",
            "description": "Tempo de expiração em segundos"
          },
          "refresh_token": {
            "type": "string",
            "description": "Token de atualização"
          },
          "scope": {
            "type": "string",
            "description": "Escopos concedidos"
          }
        },
        "required": ["access_token", "token_type", "expires_in"]
      },
      "Model": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "description": "Identificador único do modelo"
          },
          "name": {
            "type": "string",
            "description": "Nome amigável do modelo"
          },
          "provider": {
            "type": "string",
            "description": "Provedor do modelo (openai, anthropic, google, etc.)"
          },
          "capabilities": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "Capacidades do modelo (text, code, vision, etc.)"
          },
          "max_tokens": {
            "type": "integer",
            "description": "Número máximo de tokens suportados"
          }
        },
        "required": ["id", "name", "provider"]
      },
      "CompletionRequest": {
        "type": "object",
        "properties": {
          "model": {
            "type": "string",
            "description": "ID do modelo a ser usado"
          },
          "prompt": {
            "type": "string",
            "description": "Texto de entrada para o modelo"
          },
          "max_tokens": {
            "type": "integer",
            "description": "Número máximo de tokens a serem gerados",
            "default": 500
          },
          "temperature": {
            "type": "number",
            "description": "Temperatura para amostragem (0-1)",
            "default": 0.7,
            "minimum": 0,
            "maximum": 1
          },
          "stream": {
            "type": "boolean",
            "description": "Se a resposta deve ser retornada como stream",
            "default": false
          }
        },
        "required": ["model", "prompt"]
      },
      "CompletionResponse": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "description": "Identificador único da completion"
          },
          "model": {
            "type": "string",
            "description": "ID do modelo usado"
          },
          "content": {
            "type": "string",
            "description": "Texto gerado pelo modelo"
          },
          "usage": {
            "type": "object",
            "properties": {
              "prompt_tokens": {
                "type": "integer",
                "description": "Número de tokens no prompt"
              },
              "completion_tokens": {
                "type": "integer",
                "description": "Número de tokens na completion"
              },
              "total_tokens": {
                "type": "integer",
                "description": "Número total de tokens"
              }
            }
          }
        },
        "required": ["id", "model", "content"]
      },
      "Conversation": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "description": "Identificador único da conversa"
          },
          "title": {
            "type": "string",
            "description": "Título da conversa"
          },
          "model": {
            "type": "string",
            "description": "ID do modelo usado na conversa"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "description": "Data e hora de criação"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time",
            "description": "Data e hora da última atualização"
          },
          "message_count": {
            "type": "integer",
            "description": "Número de mensagens na conversa"
          }
        },
        "required": ["id", "title", "model", "created_at", "updated_at"]
      },
      "ConversationRequest": {
        "type": "object",
        "properties": {
          "title": {
            "type": "string",
            "description": "Título da conversa"
          },
          "model": {
            "type": "string",
            "description": "ID do modelo a ser usado"
          }
        },
        "required": ["title", "model"]
      },
      "Message": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "description": "Identificador único da mensagem"
          },
          "conversation_id": {
            "type": "string",
            "description": "ID da conversa à qual a mensagem pertence"
          },
          "role": {
            "type": "string",
            "enum": ["user", "assistant", "system"],
            "description": "Papel do remetente da mensagem"
          },
          "content": {
            "type": "string",
            "description": "Conteúdo da mensagem"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "description": "Data e hora de criação"
          }
        },
        "required": ["id", "conversation_id", "role", "content", "created_at"]
      },
      "MessageRequest": {
        "type": "object",
        "properties": {
          "content": {
            "type": "string",
            "description": "Conteúdo da mensagem"
          },
          "model": {
            "type": "string",
            "description": "ID do modelo a ser usado (opcional, usa o modelo da conversa se não especificado)"
          },
          "stream": {
            "type": "boolean",
            "description": "Se a resposta deve ser retornada como stream",
            "default": false
          }
        },
        "required": ["content"]
      },
      "File": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "description": "Identificador único do arquivo"
          },
          "filename": {
            "type": "string",
            "description": "Nome original do arquivo"
          },
          "size": {
            "type": "integer",
            "description": "Tamanho do arquivo em bytes"
          },
          "mime_type": {
            "type": "string",
            "description": "Tipo MIME do arquivo"
          },
          "description": {
            "type": "string",
            "description": "Descrição do arquivo"
          },
          "category": {
            "type": "string",
            "description": "Categoria do arquivo (image, document, audio, video)"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "description": "Data e hora de upload"
          },
          "download_url": {
            "type": "string",
            "description": "URL para download do arquivo"
          }
        },
        "required": ["id", "filename", "size", "mime_type", "created_at", "download_url"]
      },
      "Tool": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "description": "Identificador único da ferramenta"
          },
          "name": {
            "type": "string",
            "description": "Nome da ferramenta"
          },
          "description": {
            "type": "string",
            "description": "Descrição da ferramenta"
          },
          "category": {
            "type": "string",
            "description": "Categoria da ferramenta"
          },
          "version": {
            "type": "string",
            "description": "Versão da ferramenta"
          },
          "schema": {
            "type": "object",
            "description": "Schema JSON da ferramenta"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "description": "Data e hora de criação"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time",
            "description": "Data e hora da última atualização"
          }
        },
        "required": ["id", "name", "description", "category", "schema", "created_at", "updated_at"]
      },
      "ToolRequest": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string",
            "description": "Nome da ferramenta"
          },
          "description": {
            "type": "string",
            "description": "Descrição da ferramenta"
          },
          "category": {
            "type": "string",
            "description": "Categoria da ferramenta"
          },
          "schema": {
            "type": "object",
            "description": "Schema JSON da ferramenta"
          }
        },
        "required": ["name", "description", "category", "schema"]
      },
      "Agent": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "description": "Identificador único do agente"
          },
          "name": {
            "type": "string",
            "description": "Nome do agente"
          },
          "description": {
            "type": "string",
            "description": "Descrição do agente"
          },
          "model": {
            "type": "string",
            "description": "ID do modelo usado pelo agente"
          },
          "tools": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "IDs das ferramentas disponíveis para o agente"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "description": "Data e hora de criação"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time",
            "description": "Data e hora da última atualização"
          }
        },
        "required": ["id", "name", "description", "model", "created_at", "updated_at"]
      },
      "AgentRequest": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string",
            "description": "Nome do agente"
          },
          "description": {
            "type": "string",
            "description": "Descrição do agente"
          },
          "model": {
            "type": "string",
            "description": "ID do modelo a ser usado"
          },
          "tools": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "IDs das ferramentas disponíveis para o agente"
          }
        },
        "required": ["name", "description", "model"]
      },
      "AgentExecuteRequest": {
        "type": "object",
        "properties": {
          "input": {
            "type": "string",
            "description": "Entrada para o agente"
          },
          "stream": {
            "type": "boolean",
            "description": "Se a resposta deve ser retornada como stream",
            "default": false
          }
        },
        "required": ["input"]
      },
      "AgentExecuteResponse": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "description": "Identificador único da execução"
          },
          "agent_id": {
            "type": "string",
            "description": "ID do agente executado"
          },
          "input": {
            "type": "string",
            "description": "Entrada fornecida"
          },
          "output": {
            "type": "string",
            "description": "Saída gerada pelo agente"
          },
          "steps": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "tool": {
                  "type": "string",
                  "description": "ID da ferramenta usada"
                },
                "input": {
                  "type": "object",
                  "description": "Entrada para a ferramenta"
                },
                "output": {
                  "type": "object",
                  "description": "Saída da ferramenta"
                }
              }
            },
            "description": "Passos executados pelo agente"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "description": "Data e hora de execução"
          }
        },
        "required": ["id", "agent_id", "input", "output", "created_at"]
      },
      "ErrorResponse": {
        "type": "object",
        "properties": {
          "error": {
            "type": "string",
            "description": "Código de erro"
          },
          "error_description": {
            "type": "string",
            "description": "Descrição detalhada do erro"
          },
          "status_code": {
            "type": "integer",
            "description": "Código de status HTTP"
          }
        },
        "required": ["error", "error_description"]
      }
    },
    "securitySchemes": {
      "bearerAuth": {
        "type": "http",
        "scheme": "bearer",
        "bearerFormat": "JWT",
        "description": "Token JWT de autenticação"
      }
    }
  }
}
