"""init

Revision ID: 294dba6f3a38
Revises: 
Create Date: 2025-06-11 19:51:50.037677

"""

from typing import Sequence, Union

from alembic import op
import sqlalchemy as sa
from sqlalchemy.dialects import postgresql

# revision identifiers, used by Alembic.
revision: str = "294dba6f3a38"
down_revision: Union[str, None] = "b25def6b9d26"
branch_labels: Union[str, Sequence[str], None] = None
depends_on: Union[str, Sequence[str], None] = None


def upgrade() -> None:
    """Upgrade schema."""
    # ### commands auto generated by Alembic - please adjust! ###
    op.create_table(
        "business_metrics",
        sa.Column("id", sa.Integer(), nullable=False),
        sa.Column("date", sa.DateTime(), nullable=False),
        sa.Column("period_type", sa.String(length=20), nullable=False),
        sa.Column("total_users", sa.Integer(), nullable=False),
        sa.Column("new_users", sa.Integer(), nullable=False),
        sa.Column("active_users", sa.Integer(), nullable=False),
        sa.Column("churned_users", sa.Integer(), nullable=False),
        sa.Column("total_sessions", sa.Integer(), nullable=False),
        sa.Column("avg_session_duration", sa.Float(), nullable=False),
        sa.Column("total_page_views", sa.Integer(), nullable=False),
        sa.Column("bounce_rate", sa.Float(), nullable=False),
        sa.Column("workflows_created", sa.Integer(), nullable=False),
        sa.Column("workflows_executed", sa.Integer(), nullable=False),
        sa.Column("components_published", sa.Integer(), nullable=False),
        sa.Column("components_downloaded", sa.Integer(), nullable=False),
        sa.Column("workspaces_created", sa.Integer(), nullable=False),
        sa.Column("teams_formed", sa.Integer(), nullable=False),
        sa.Column("collaborative_sessions", sa.Integer(), nullable=False),
        sa.Column("total_revenue", sa.Float(), nullable=False),
        sa.Column("recurring_revenue", sa.Float(), nullable=False),
        sa.Column("marketplace_revenue", sa.Float(), nullable=False),
        sa.Column("avg_revenue_per_user", sa.Float(), nullable=False),
        sa.Column("error_rate", sa.Float(), nullable=False),
        sa.Column("avg_response_time", sa.Float(), nullable=False),
        sa.Column("uptime_percentage", sa.Float(), nullable=False),
        sa.Column("customer_satisfaction", sa.Float(), nullable=False),
        sa.Column("created_at", sa.DateTime(), nullable=False),
        sa.Column("updated_at", sa.DateTime(), nullable=False),
        sa.PrimaryKeyConstraint("id"),
        schema="synapscale_db",
    )
    op.create_index(
        op.f("ix_synapscale_db_business_metrics_date"),
        "business_metrics",
        ["date"],
        unique=False,
        schema="synapscale_db",
    )
    op.create_index(
        op.f("ix_synapscale_db_business_metrics_id"),
        "business_metrics",
        ["id"],
        unique=False,
        schema="synapscale_db",
    )
    op.create_table(
        "system_performance_metrics",
        sa.Column("id", sa.Integer(), nullable=False),
        sa.Column("metric_name", sa.String(length=100), nullable=False),
        sa.Column("metric_type", sa.String(length=20), nullable=False),
        sa.Column("service", sa.String(length=50), nullable=False),
        sa.Column("environment", sa.String(length=20), nullable=False),
        sa.Column("value", sa.Float(), nullable=False),
        sa.Column("unit", sa.String(length=20), nullable=True),
        sa.Column("tags", sa.JSON(), nullable=True),
        sa.Column("timestamp", sa.DateTime(), nullable=False),
        sa.PrimaryKeyConstraint("id"),
        schema="synapscale_db",
    )
    op.create_index(
        op.f("ix_synapscale_db_system_performance_metrics_id"),
        "system_performance_metrics",
        ["id"],
        unique=False,
        schema="synapscale_db",
    )
    op.create_index(
        op.f("ix_synapscale_db_system_performance_metrics_metric_name"),
        "system_performance_metrics",
        ["metric_name"],
        unique=False,
        schema="synapscale_db",
    )
    op.create_index(
        op.f("ix_synapscale_db_system_performance_metrics_service"),
        "system_performance_metrics",
        ["service"],
        unique=False,
        schema="synapscale_db",
    )
    op.create_index(
        op.f("ix_synapscale_db_system_performance_metrics_timestamp"),
        "system_performance_metrics",
        ["timestamp"],
        unique=False,
        schema="synapscale_db",
    )
    op.create_table(
        "email_verification_tokens",
        sa.Column("id", sa.UUID(), nullable=False),
        sa.Column("token", sa.String(length=500), nullable=False),
        sa.Column("user_id", sa.UUID(), nullable=False),
        sa.Column("expires_at", sa.DateTime(timezone=True), nullable=False),
        sa.Column("is_used", sa.Boolean(), nullable=True),
        sa.Column(
            "created_at",
            sa.DateTime(timezone=True),
            server_default=sa.text("now()"),
            nullable=True,
        ),
        sa.PrimaryKeyConstraint("id"),
        schema="synapscale_db",
    )
    op.create_index(
        op.f("ix_synapscale_db_email_verification_tokens_token"),
        "email_verification_tokens",
        ["token"],
        unique=True,
        schema="synapscale_db",
    )
    op.create_index(
        op.f("ix_synapscale_db_email_verification_tokens_user_id"),
        "email_verification_tokens",
        ["user_id"],
        unique=False,
        schema="synapscale_db",
    )
    op.create_table(
        "password_reset_tokens",
        sa.Column("id", sa.UUID(), nullable=False),
        sa.Column("token", sa.String(length=500), nullable=False),
        sa.Column("user_id", sa.UUID(), nullable=False),
        sa.Column("expires_at", sa.DateTime(timezone=True), nullable=False),
        sa.Column("is_used", sa.Boolean(), nullable=True),
        sa.Column(
            "created_at",
            sa.DateTime(timezone=True),
            server_default=sa.text("now()"),
            nullable=True,
        ),
        sa.PrimaryKeyConstraint("id"),
        schema="synapscale_db",
    )
    op.create_index(
        op.f("ix_synapscale_db_password_reset_tokens_token"),
        "password_reset_tokens",
        ["token"],
        unique=True,
        schema="synapscale_db",
    )
    op.create_index(
        op.f("ix_synapscale_db_password_reset_tokens_user_id"),
        "password_reset_tokens",
        ["user_id"],
        unique=False,
        schema="synapscale_db",
    )
    op.create_table(
        "users",
        sa.Column("id", sa.UUID(), nullable=False),
        sa.Column("email", sa.String(length=255), nullable=False),
        sa.Column("username", sa.String(length=255), nullable=False),
        sa.Column("hashed_password", sa.String(length=255), nullable=False),
        sa.Column("full_name", sa.String(length=200), nullable=False),
        sa.Column("is_active", sa.Boolean(), nullable=True),
        sa.Column("is_verified", sa.Boolean(), nullable=True),
        sa.Column("is_superuser", sa.Boolean(), nullable=True),
        sa.Column("profile_image_url", sa.String(length=500), nullable=True),
        sa.Column("bio", sa.String(length=1000), nullable=True),
        sa.Column(
            "created_at",
            sa.DateTime(timezone=True),
            server_default=sa.text("now()"),
            nullable=True,
        ),
        sa.Column(
            "updated_at",
            sa.DateTime(timezone=True),
            server_default=sa.text("now()"),
            nullable=True,
        ),
        sa.PrimaryKeyConstraint("id"),
        schema="synapscale_db",
    )
    op.create_index(
        op.f("ix_synapscale_db_users_email"),
        "users",
        ["email"],
        unique=True,
        schema="synapscale_db",
    )
    op.create_index(
        op.f("ix_synapscale_db_users_username"),
        "users",
        ["username"],
        unique=True,
        schema="synapscale_db",
    )
    op.create_table(
        "files",
        sa.Column("id", sa.UUID(), nullable=False),
        sa.Column("filename", sa.String(length=255), nullable=False),
        sa.Column("original_name", sa.String(length=255), nullable=False),
        sa.Column("file_path", sa.String(length=500), nullable=False),
        sa.Column("file_size", sa.Integer(), nullable=False),
        sa.Column("mime_type", sa.String(length=100), nullable=False),
        sa.Column("category", sa.String(length=50), nullable=False),
        sa.Column(
            "is_public", sa.Boolean(), server_default=sa.text("false"), nullable=False
        ),
        sa.Column("user_id", sa.UUID(), nullable=False),
        sa.Column(
            "created_at",
            sa.DateTime(timezone=True),
            server_default=sa.text("now()"),
            nullable=False,
        ),
        sa.Column(
            "updated_at",
            sa.DateTime(timezone=True),
            server_default=sa.text("now()"),
            nullable=False,
        ),
        sa.Column("tags", sa.JSON(), nullable=True),
        sa.Column("description", sa.Text(), nullable=True),
        sa.ForeignKeyConstraint(
            ["user_id"],
            ["synapscale_db.users.id"],
            onupdate="CASCADE",
            ondelete="CASCADE",
        ),
        sa.PrimaryKeyConstraint("id"),
        schema="synapscale_db",
    )
    op.create_index(
        "idx_file_created_at",
        "files",
        ["created_at"],
        unique=False,
        schema="synapscale_db",
    )
    op.create_index(
        "idx_file_filename", "files", ["filename"], unique=False, schema="synapscale_db"
    )
    op.create_table(
        "marketplace_components",
        sa.Column("id", sa.UUID(), nullable=False),
        sa.Column("name", sa.String(length=255), nullable=False),
        sa.Column("description", sa.Text(), nullable=True),
        sa.Column("category", sa.String(length=100), nullable=False),
        sa.Column("component_type", sa.String(length=50), nullable=False),
        sa.Column("tags", sa.Text(), nullable=True),
        sa.Column(
            "price",
            sa.DECIMAL(precision=10, scale=2),
            server_default=sa.text("0.00"),
            nullable=False,
        ),
        sa.Column(
            "is_free", sa.Boolean(), server_default=sa.text("true"), nullable=False
        ),
        sa.Column("author_id", sa.UUID(), nullable=False),
        sa.Column(
            "version",
            sa.String(length=50),
            server_default=sa.text("'1.0.0'"),
            nullable=False,
        ),
        sa.Column("content", sa.Text(), nullable=True),
        sa.Column("component_metadata", sa.Text(), nullable=True),
        sa.Column(
            "downloads_count", sa.Integer(), server_default=sa.text("0"), nullable=False
        ),
        sa.Column("rating_average", sa.Float(), nullable=False),
        sa.Column("rating_count", sa.Integer(), nullable=False),
        sa.Column(
            "is_featured", sa.Boolean(), server_default=sa.text("false"), nullable=False
        ),
        sa.Column(
            "is_approved", sa.Boolean(), server_default=sa.text("false"), nullable=False
        ),
        sa.Column(
            "status",
            sa.String(length=20),
            server_default=sa.text("'pending'"),
            nullable=False,
        ),
        sa.Column(
            "created_at",
            sa.DateTime(timezone=True),
            server_default=sa.text("now()"),
            nullable=False,
        ),
        sa.Column(
            "updated_at",
            sa.DateTime(timezone=True),
            server_default=sa.text("now()"),
            nullable=False,
        ),
        sa.Column("title", sa.String(length=200), nullable=False),
        sa.Column("short_description", sa.String(length=500), nullable=True),
        sa.Column("subcategory", sa.String(length=50), nullable=True),
        sa.Column("author_name", sa.String(length=100), nullable=False),
        sa.Column("organization", sa.String(length=100), nullable=True),
        sa.Column("configuration_schema", sa.JSON(), nullable=True),
        sa.Column("dependencies", sa.JSON(), nullable=True),
        sa.Column("compatibility", sa.JSON(), nullable=True),
        sa.Column("documentation", sa.Text(), nullable=True),
        sa.Column("readme", sa.Text(), nullable=True),
        sa.Column("changelog", sa.Text(), nullable=True),
        sa.Column("examples", sa.JSON(), nullable=True),
        sa.Column("icon_url", sa.String(length=500), nullable=True),
        sa.Column("screenshots", sa.JSON(), nullable=True),
        sa.Column("demo_url", sa.String(length=500), nullable=True),
        sa.Column("video_url", sa.String(length=500), nullable=True),
        sa.Column("currency", sa.String(length=3), nullable=True),
        sa.Column("license_type", sa.String(length=50), nullable=True),
        sa.Column("install_count", sa.Integer(), nullable=False),
        sa.Column("view_count", sa.Integer(), nullable=False),
        sa.Column("like_count", sa.Integer(), nullable=False),
        sa.Column("is_verified", sa.Boolean(), nullable=False),
        sa.Column("moderation_notes", sa.Text(), nullable=True),
        sa.Column("keywords", sa.JSON(), nullable=True),
        sa.Column("search_vector", sa.Text(), nullable=True),
        sa.Column("popularity_score", sa.Float(), nullable=False),
        sa.Column("published_at", sa.DateTime(), nullable=True),
        sa.Column("last_download_at", sa.DateTime(), nullable=True),
        sa.ForeignKeyConstraint(
            ["author_id"],
            ["synapscale_db.users.id"],
            onupdate="CASCADE",
            ondelete="CASCADE",
        ),
        sa.PrimaryKeyConstraint("id"),
        schema="synapscale_db",
    )
    op.create_index(
        op.f("ix_synapscale_db_marketplace_components_subcategory"),
        "marketplace_components",
        ["subcategory"],
        unique=False,
        schema="synapscale_db",
    )
    op.create_table(
        "template_collections",
        sa.Column("id", sa.Integer(), nullable=False),
        sa.Column("collection_id", sa.String(length=36), nullable=True),
        sa.Column("name", sa.String(length=255), nullable=False),
        sa.Column("description", sa.Text(), nullable=True),
        sa.Column("creator_id", sa.UUID(), nullable=False),
        sa.Column("is_public", sa.Boolean(), nullable=True),
        sa.Column("is_featured", sa.Boolean(), nullable=True),
        sa.Column("template_ids", sa.JSON(), nullable=False),
        sa.Column("tags", sa.JSON(), nullable=True),
        sa.Column("thumbnail_url", sa.String(length=500), nullable=True),
        sa.Column("view_count", sa.Integer(), nullable=True),
        sa.Column("follow_count", sa.Integer(), nullable=True),
        sa.Column(
            "created_at",
            sa.DateTime(timezone=True),
            server_default=sa.text("now()"),
            nullable=True,
        ),
        sa.Column(
            "updated_at",
            sa.DateTime(timezone=True),
            server_default=sa.text("now()"),
            nullable=True,
        ),
        sa.ForeignKeyConstraint(
            ["creator_id"],
            ["synapscale_db.users.id"],
        ),
        sa.PrimaryKeyConstraint("id"),
        schema="synapscale_db",
    )
    op.create_index(
        op.f("ix_synapscale_db_template_collections_collection_id"),
        "template_collections",
        ["collection_id"],
        unique=True,
        schema="synapscale_db",
    )
    op.create_index(
        op.f("ix_synapscale_db_template_collections_creator_id"),
        "template_collections",
        ["creator_id"],
        unique=False,
        schema="synapscale_db",
    )
    op.create_index(
        op.f("ix_synapscale_db_template_collections_id"),
        "template_collections",
        ["id"],
        unique=False,
        schema="synapscale_db",
    )
    op.create_table(
        "user_behavior_metrics",
        sa.Column("id", sa.UUID(), nullable=False),
        sa.Column("user_id", sa.UUID(), nullable=False),
        sa.Column("date", sa.DateTime(), nullable=False),
        sa.Column("period_type", sa.String(length=20), nullable=False),
        sa.Column("session_count", sa.Integer(), nullable=False),
        sa.Column("total_session_duration", sa.Integer(), nullable=False),
        sa.Column("avg_session_duration", sa.Float(), nullable=False),
        sa.Column("page_views", sa.Integer(), nullable=False),
        sa.Column("unique_pages_visited", sa.Integer(), nullable=False),
        sa.Column("workflows_created", sa.Integer(), nullable=False),
        sa.Column("workflows_executed", sa.Integer(), nullable=False),
        sa.Column("components_used", sa.Integer(), nullable=False),
        sa.Column("collaborations_initiated", sa.Integer(), nullable=False),
        sa.Column("marketplace_purchases", sa.Integer(), nullable=False),
        sa.Column("revenue_generated", sa.Float(), nullable=False),
        sa.Column("components_published", sa.Integer(), nullable=False),
        sa.Column("error_count", sa.Integer(), nullable=False),
        sa.Column("support_tickets", sa.Integer(), nullable=False),
        sa.Column("feature_requests", sa.Integer(), nullable=False),
        sa.Column("engagement_score", sa.Float(), nullable=False),
        sa.Column("satisfaction_score", sa.Float(), nullable=False),
        sa.Column("value_score", sa.Float(), nullable=False),
        sa.Column("created_at", sa.DateTime(), nullable=False),
        sa.Column("updated_at", sa.DateTime(), nullable=False),
        sa.ForeignKeyConstraint(
            ["user_id"],
            ["synapscale_db.users.id"],
        ),
        sa.PrimaryKeyConstraint("id"),
        schema="synapscale_db",
    )
    op.create_index(
        op.f("ix_synapscale_db_user_behavior_metrics_date"),
        "user_behavior_metrics",
        ["date"],
        unique=False,
        schema="synapscale_db",
    )
    op.create_index(
        op.f("ix_synapscale_db_user_behavior_metrics_user_id"),
        "user_behavior_metrics",
        ["user_id"],
        unique=False,
        schema="synapscale_db",
    )
    op.create_table(
        "user_insights",
        sa.Column("id", sa.UUID(), nullable=False),
        sa.Column("user_id", sa.UUID(), nullable=False),
        sa.Column("insight_type", sa.String(length=50), nullable=False),
        sa.Column("category", sa.String(length=50), nullable=False),
        sa.Column("priority", sa.String(length=20), nullable=False),
        sa.Column("title", sa.String(length=200), nullable=False),
        sa.Column("description", sa.Text(), nullable=False),
        sa.Column("recommendation", sa.Text(), nullable=True),
        sa.Column("supporting_data", sa.JSON(), nullable=True),
        sa.Column("confidence_score", sa.Float(), nullable=False),
        sa.Column("suggested_action", sa.String(length=100), nullable=True),
        sa.Column("action_url", sa.String(length=500), nullable=True),
        sa.Column("action_data", sa.JSON(), nullable=True),
        sa.Column("is_read", sa.Boolean(), nullable=False),
        sa.Column("is_dismissed", sa.Boolean(), nullable=False),
        sa.Column("is_acted_upon", sa.Boolean(), nullable=False),
        sa.Column("user_feedback", sa.String(length=20), nullable=True),
        sa.Column("expires_at", sa.DateTime(), nullable=True),
        sa.Column("is_evergreen", sa.Boolean(), nullable=False),
        sa.Column("created_at", sa.DateTime(), nullable=False),
        sa.Column("read_at", sa.DateTime(), nullable=True),
        sa.Column("acted_at", sa.DateTime(), nullable=True),
        sa.ForeignKeyConstraint(
            ["user_id"],
            ["synapscale_db.users.id"],
        ),
        sa.PrimaryKeyConstraint("id"),
        schema="synapscale_db",
    )
    op.create_index(
        op.f("ix_synapscale_db_user_insights_category"),
        "user_insights",
        ["category"],
        unique=False,
        schema="synapscale_db",
    )
    op.create_index(
        op.f("ix_synapscale_db_user_insights_insight_type"),
        "user_insights",
        ["insight_type"],
        unique=False,
        schema="synapscale_db",
    )
    op.create_index(
        op.f("ix_synapscale_db_user_insights_user_id"),
        "user_insights",
        ["user_id"],
        unique=False,
        schema="synapscale_db",
    )
    op.create_table(
        "workspaces",
        sa.Column("id", sa.UUID(), nullable=False),
        sa.Column("name", sa.String(length=255), nullable=False),
        sa.Column("slug", sa.String(length=120), nullable=False),
        sa.Column("description", sa.Text(), nullable=True),
        sa.Column("avatar_url", sa.String(length=500), nullable=True),
        sa.Column("color", sa.String(length=7), nullable=True),
        sa.Column("owner_id", sa.UUID(), nullable=False),
        sa.Column(
            "is_public", sa.Boolean(), server_default=sa.text("false"), nullable=False
        ),
        sa.Column("is_template", sa.Boolean(), nullable=False),
        sa.Column("allow_guest_access", sa.Boolean(), nullable=False),
        sa.Column("require_approval", sa.Boolean(), nullable=False),
        sa.Column("max_members", sa.Integer(), nullable=True),
        sa.Column("max_projects", sa.Integer(), nullable=True),
        sa.Column("max_storage_mb", sa.Integer(), nullable=True),
        sa.Column("enable_real_time_editing", sa.Boolean(), nullable=False),
        sa.Column("enable_comments", sa.Boolean(), nullable=False),
        sa.Column("enable_chat", sa.Boolean(), nullable=False),
        sa.Column("enable_video_calls", sa.Boolean(), nullable=False),
        sa.Column("notification_settings", sa.JSON(), nullable=True),
        sa.Column("member_count", sa.Integer(), nullable=False),
        sa.Column("project_count", sa.Integer(), nullable=False),
        sa.Column("activity_count", sa.Integer(), nullable=False),
        sa.Column("storage_used_mb", sa.Float(), nullable=False),
        sa.Column("status", sa.String(length=20), nullable=False),
        sa.Column(
            "created_at",
            sa.DateTime(timezone=True),
            server_default=sa.text("now()"),
            nullable=False,
        ),
        sa.Column(
            "updated_at",
            sa.DateTime(timezone=True),
            server_default=sa.text("now()"),
            nullable=False,
        ),
        sa.Column("last_activity_at", sa.DateTime(), nullable=False),
        sa.ForeignKeyConstraint(
            ["owner_id"],
            ["synapscale_db.users.id"],
            onupdate="CASCADE",
            ondelete="CASCADE",
        ),
        sa.PrimaryKeyConstraint("id"),
        schema="synapscale_db",
    )
    op.create_index(
        op.f("ix_synapscale_db_workspaces_slug"),
        "workspaces",
        ["slug"],
        unique=True,
        schema="synapscale_db",
    )
    op.create_table(
        "refresh_tokens",
        sa.Column("id", sa.UUID(), nullable=False),
        sa.Column("token", sa.String(length=500), nullable=False),
        sa.Column("user_id", sa.UUID(), nullable=False),
        sa.Column("expires_at", sa.DateTime(timezone=True), nullable=False),
        sa.Column("is_revoked", sa.Boolean(), nullable=True),
        sa.Column(
            "created_at",
            sa.DateTime(timezone=True),
            server_default=sa.text("now()"),
            nullable=True,
        ),
        sa.ForeignKeyConstraint(
            ["user_id"], ["synapscale_db.users.id"], ondelete="CASCADE"
        ),
        sa.PrimaryKeyConstraint("id"),
        schema="synapscale_db",
    )
    op.create_index(
        op.f("ix_synapscale_db_refresh_tokens_token"),
        "refresh_tokens",
        ["token"],
        unique=True,
        schema="synapscale_db",
    )
    op.create_index(
        op.f("ix_synapscale_db_refresh_tokens_user_id"),
        "refresh_tokens",
        ["user_id"],
        unique=False,
        schema="synapscale_db",
    )
    op.create_table(
        "agents",
        sa.Column("id", sa.UUID(), nullable=False),
        sa.Column("name", sa.String(length=255), nullable=False),
        sa.Column("description", sa.Text(), nullable=True),
        sa.Column("provider", sa.String(length=100), nullable=False),
        sa.Column("model", sa.String(length=100), nullable=False),
        sa.Column("system_prompt", sa.Text(), nullable=True),
        sa.Column(
            "temperature",
            sa.DECIMAL(precision=3, scale=2),
            server_default=sa.text("0.7"),
            nullable=True,
        ),
        sa.Column(
            "max_tokens", sa.Integer(), server_default=sa.text("1000"), nullable=True
        ),
        sa.Column(
            "is_active", sa.Boolean(), server_default=sa.text("true"), nullable=False
        ),
        sa.Column("user_id", sa.UUID(), nullable=False),
        sa.Column(
            "created_at",
            sa.DateTime(timezone=True),
            server_default=sa.text("now()"),
            nullable=False,
        ),
        sa.Column(
            "updated_at",
            sa.DateTime(timezone=True),
            server_default=sa.text("now()"),
            nullable=False,
        ),
        sa.Column("personality", sa.Text(), nullable=True),
        sa.Column("instructions", sa.Text(), nullable=True),
        sa.Column(
            "agent_type",
            sa.Enum("GENERAL", "SPECIALIST", "WORKFLOW", "ASSISTANT", name="agenttype"),
            nullable=True,
        ),
        sa.Column("model_provider", sa.String(length=50), nullable=True),
        sa.Column("top_p", sa.Float(), nullable=True),
        sa.Column("frequency_penalty", sa.Float(), nullable=True),
        sa.Column("presence_penalty", sa.Float(), nullable=True),
        sa.Column("tools", sa.JSON(), nullable=True),
        sa.Column("knowledge_base", sa.JSON(), nullable=True),
        sa.Column("capabilities", sa.JSON(), nullable=True),
        sa.Column(
            "status",
            sa.Enum(
                "ACTIVE", "INACTIVE", "TRAINING", "MAINTENANCE", name="agentstatus"
            ),
            nullable=True,
        ),
        sa.Column("avatar_url", sa.String(length=500), nullable=True),
        sa.Column("configuration", sa.JSON(), nullable=True),
        sa.Column("conversation_count", sa.Integer(), nullable=True),
        sa.Column("message_count", sa.Integer(), nullable=True),
        sa.Column("total_tokens_used", sa.Integer(), nullable=True),
        sa.Column("average_response_time", sa.Float(), nullable=True),
        sa.Column("rating_average", sa.Float(), nullable=True),
        sa.Column("rating_count", sa.Integer(), nullable=True),
        sa.Column("last_active_at", sa.DateTime(timezone=True), nullable=True),
        sa.Column("workspace_id", sa.UUID(), nullable=True),
        sa.ForeignKeyConstraint(
            ["user_id"],
            ["synapscale_db.users.id"],
            onupdate="CASCADE",
            ondelete="CASCADE",
        ),
        sa.ForeignKeyConstraint(
            ["workspace_id"],
            ["synapscale_db.workspaces.id"],
        ),
        sa.PrimaryKeyConstraint("id"),
        schema="synapscale_db",
    )
    op.create_index(
        op.f("ix_synapscale_db_agents_workspace_id"),
        "agents",
        ["workspace_id"],
        unique=False,
        schema="synapscale_db",
    )
    op.create_table(
        "analytics_dashboards",
        sa.Column("id", sa.UUID(), nullable=False),
        sa.Column("name", sa.String(length=255), nullable=False),
        sa.Column("description", sa.Text(), nullable=True),
        sa.Column("icon", sa.String(length=50), nullable=True),
        sa.Column("color", sa.String(length=7), nullable=True),
        sa.Column("user_id", sa.UUID(), nullable=False),
        sa.Column("layout", sa.JSON(), nullable=False),
        sa.Column("widgets", sa.JSON(), nullable=False),
        sa.Column("filters", sa.JSON(), nullable=True),
        sa.Column("auto_refresh", sa.Boolean(), nullable=False),
        sa.Column("refresh_interval", sa.Integer(), nullable=True),
        sa.Column(
            "is_public", sa.Boolean(), server_default=sa.text("false"), nullable=False
        ),
        sa.Column("shared_with", sa.JSON(), nullable=True),
        sa.Column("is_default", sa.Boolean(), nullable=False),
        sa.Column("status", sa.String(length=20), nullable=False),
        sa.Column(
            "created_at",
            sa.DateTime(timezone=True),
            server_default=sa.text("now()"),
            nullable=False,
        ),
        sa.Column(
            "updated_at",
            sa.DateTime(timezone=True),
            server_default=sa.text("now()"),
            nullable=False,
        ),
        sa.Column("last_viewed_at", sa.DateTime(), nullable=True),
        sa.Column("workspace_id", sa.UUID(), nullable=True),
        sa.ForeignKeyConstraint(
            ["user_id"], ["synapscale_db.users.id"], ondelete="CASCADE"
        ),
        sa.ForeignKeyConstraint(
            ["workspace_id"],
            ["synapscale_db.workspaces.id"],
        ),
        sa.PrimaryKeyConstraint("id"),
        schema="synapscale_db",
    )
    op.create_index(
        op.f("ix_synapscale_db_analytics_dashboards_user_id"),
        "analytics_dashboards",
        ["user_id"],
        unique=False,
        schema="synapscale_db",
    )
    op.create_index(
        op.f("ix_synapscale_db_analytics_dashboards_workspace_id"),
        "analytics_dashboards",
        ["workspace_id"],
        unique=False,
        schema="synapscale_db",
    )
    op.create_table(
        "component_downloads",
        sa.Column("id", sa.UUID(), nullable=False),
        sa.Column("component_id", sa.UUID(), nullable=False),
        sa.Column("user_id", sa.UUID(), nullable=False),
        sa.Column("version", sa.String(length=20), nullable=False),
        sa.Column("download_type", sa.String(length=20), nullable=False),
        sa.Column("ip_address", sa.String(length=45), nullable=True),
        sa.Column("user_agent", sa.String(length=500), nullable=True),
        sa.Column("referrer", sa.String(length=500), nullable=True),
        sa.Column("status", sa.String(length=20), nullable=False),
        sa.Column("file_size", sa.Integer(), nullable=True),
        sa.Column("created_at", sa.DateTime(), nullable=False),
        sa.Column("completed_at", sa.DateTime(), nullable=True),
        sa.ForeignKeyConstraint(
            ["component_id"],
            ["synapscale_db.marketplace_components.id"],
        ),
        sa.ForeignKeyConstraint(
            ["user_id"],
            ["synapscale_db.users.id"],
        ),
        sa.PrimaryKeyConstraint("id"),
        schema="synapscale_db",
    )
    op.create_index(
        op.f("ix_synapscale_db_component_downloads_component_id"),
        "component_downloads",
        ["component_id"],
        unique=False,
        schema="synapscale_db",
    )
    op.create_index(
        op.f("ix_synapscale_db_component_downloads_user_id"),
        "component_downloads",
        ["user_id"],
        unique=False,
        schema="synapscale_db",
    )
    op.create_table(
        "component_purchases",
        sa.Column("id", sa.UUID(), nullable=False),
        sa.Column("component_id", sa.UUID(), nullable=False),
        sa.Column("user_id", sa.UUID(), nullable=False),
        sa.Column("amount", sa.Float(), nullable=False),
        sa.Column("currency", sa.String(length=3), nullable=False),
        sa.Column("payment_method", sa.String(length=50), nullable=True),
        sa.Column("transaction_id", sa.String(length=100), nullable=False),
        sa.Column("payment_provider", sa.String(length=50), nullable=True),
        sa.Column("provider_transaction_id", sa.String(length=100), nullable=True),
        sa.Column("status", sa.String(length=20), nullable=False),
        sa.Column("license_key", sa.String(length=100), nullable=True),
        sa.Column("license_expires_at", sa.DateTime(), nullable=True),
        sa.Column("created_at", sa.DateTime(), nullable=False),
        sa.Column("completed_at", sa.DateTime(), nullable=True),
        sa.Column("refunded_at", sa.DateTime(), nullable=True),
        sa.ForeignKeyConstraint(
            ["component_id"],
            ["synapscale_db.marketplace_components.id"],
        ),
        sa.ForeignKeyConstraint(
            ["user_id"],
            ["synapscale_db.users.id"],
        ),
        sa.PrimaryKeyConstraint("id"),
        sa.UniqueConstraint("license_key"),
        sa.UniqueConstraint("transaction_id"),
        schema="synapscale_db",
    )
    op.create_index(
        op.f("ix_synapscale_db_component_purchases_component_id"),
        "component_purchases",
        ["component_id"],
        unique=False,
        schema="synapscale_db",
    )
    op.create_index(
        op.f("ix_synapscale_db_component_purchases_user_id"),
        "component_purchases",
        ["user_id"],
        unique=False,
        schema="synapscale_db",
    )
    op.create_table(
        "component_ratings",
        sa.Column("id", sa.UUID(), nullable=False),
        sa.Column("component_id", sa.UUID(), nullable=False),
        sa.Column("user_id", sa.UUID(), nullable=False),
        sa.Column("rating", sa.Integer(), nullable=False),
        sa.Column("title", sa.String(length=200), nullable=True),
        sa.Column("review", sa.Text(), nullable=True),
        sa.Column("ease_of_use", sa.Integer(), nullable=True),
        sa.Column("documentation_quality", sa.Integer(), nullable=True),
        sa.Column("performance", sa.Integer(), nullable=True),
        sa.Column("reliability", sa.Integer(), nullable=True),
        sa.Column("support_quality", sa.Integer(), nullable=True),
        sa.Column("version_used", sa.String(length=20), nullable=True),
        sa.Column("use_case", sa.String(length=100), nullable=True),
        sa.Column("experience_level", sa.String(length=20), nullable=True),
        sa.Column("helpful_count", sa.Integer(), nullable=False),
        sa.Column("reported_count", sa.Integer(), nullable=False),
        sa.Column("is_verified_purchase", sa.Boolean(), nullable=False),
        sa.Column("is_featured", sa.Boolean(), nullable=False),
        sa.Column("status", sa.String(length=20), nullable=False),
        sa.Column("created_at", sa.DateTime(), nullable=False),
        sa.Column("updated_at", sa.DateTime(), nullable=False),
        sa.ForeignKeyConstraint(
            ["component_id"],
            ["synapscale_db.marketplace_components.id"],
        ),
        sa.ForeignKeyConstraint(
            ["user_id"],
            ["synapscale_db.users.id"],
        ),
        sa.PrimaryKeyConstraint("id"),
        schema="synapscale_db",
    )
    op.create_index(
        op.f("ix_synapscale_db_component_ratings_component_id"),
        "component_ratings",
        ["component_id"],
        unique=False,
        schema="synapscale_db",
    )
    op.create_index(
        op.f("ix_synapscale_db_component_ratings_user_id"),
        "component_ratings",
        ["user_id"],
        unique=False,
        schema="synapscale_db",
    )
    op.create_table(
        "component_versions",
        sa.Column("id", sa.UUID(), nullable=False),
        sa.Column("component_id", sa.UUID(), nullable=False),
        sa.Column("version", sa.String(length=20), nullable=False),
        sa.Column("is_latest", sa.Boolean(), nullable=False),
        sa.Column("is_stable", sa.Boolean(), nullable=False),
        sa.Column("changelog", sa.Text(), nullable=True),
        sa.Column("breaking_changes", sa.Text(), nullable=True),
        sa.Column("migration_guide", sa.Text(), nullable=True),
        sa.Column("component_data", sa.JSON(), nullable=False),
        sa.Column("file_size", sa.Integer(), nullable=True),
        sa.Column("min_platform_version", sa.String(length=20), nullable=True),
        sa.Column("max_platform_version", sa.String(length=20), nullable=True),
        sa.Column("dependencies", sa.JSON(), nullable=True),
        sa.Column("download_count", sa.Integer(), nullable=False),
        sa.Column("status", sa.String(length=20), nullable=False),
        sa.Column("created_at", sa.DateTime(), nullable=False),
        sa.Column("deprecated_at", sa.DateTime(), nullable=True),
        sa.ForeignKeyConstraint(
            ["component_id"],
            ["synapscale_db.marketplace_components.id"],
        ),
        sa.PrimaryKeyConstraint("id"),
        schema="synapscale_db",
    )
    op.create_index(
        op.f("ix_synapscale_db_component_versions_component_id"),
        "component_versions",
        ["component_id"],
        unique=False,
        schema="synapscale_db",
    )
    op.create_table(
        "custom_reports",
        sa.Column("id", sa.UUID(), nullable=False),
        sa.Column("user_id", sa.UUID(), nullable=False),
        sa.Column("workspace_id", sa.UUID(), nullable=True),
        sa.Column("name", sa.String(length=200), nullable=False),
        sa.Column("description", sa.Text(), nullable=True),
        sa.Column("category", sa.String(length=50), nullable=True),
        sa.Column("query_config", sa.JSON(), nullable=False),
        sa.Column("visualization_config", sa.JSON(), nullable=True),
        sa.Column("filters", sa.JSON(), nullable=True),
        sa.Column("is_scheduled", sa.Boolean(), nullable=False),
        sa.Column("schedule_config", sa.JSON(), nullable=True),
        sa.Column("last_run_at", sa.DateTime(), nullable=True),
        sa.Column("next_run_at", sa.DateTime(), nullable=True),
        sa.Column("is_public", sa.Boolean(), nullable=False),
        sa.Column("shared_with", sa.JSON(), nullable=True),
        sa.Column("cached_data", sa.JSON(), nullable=True),
        sa.Column("cache_expires_at", sa.DateTime(), nullable=True),
        sa.Column("status", sa.String(length=20), nullable=False),
        sa.Column("created_at", sa.DateTime(), nullable=False),
        sa.Column("updated_at", sa.DateTime(), nullable=False),
        sa.ForeignKeyConstraint(
            ["user_id"],
            ["synapscale_db.users.id"],
        ),
        sa.ForeignKeyConstraint(
            ["workspace_id"],
            ["synapscale_db.workspaces.id"],
        ),
        sa.PrimaryKeyConstraint("id"),
        schema="synapscale_db",
    )
    op.create_index(
        op.f("ix_synapscale_db_custom_reports_category"),
        "custom_reports",
        ["category"],
        unique=False,
        schema="synapscale_db",
    )
    op.create_index(
        op.f("ix_synapscale_db_custom_reports_user_id"),
        "custom_reports",
        ["user_id"],
        unique=False,
        schema="synapscale_db",
    )
    op.create_index(
        op.f("ix_synapscale_db_custom_reports_workspace_id"),
        "custom_reports",
        ["workspace_id"],
        unique=False,
        schema="synapscale_db",
    )
    op.create_table(
        "nodes",
        sa.Column("id", sa.UUID(), nullable=False),
        sa.Column("name", sa.String(length=255), nullable=False),
        sa.Column("category", sa.String(length=100), nullable=False),
        sa.Column("description", sa.Text(), nullable=True),
        sa.Column(
            "version",
            sa.String(length=50),
            server_default=sa.text("'1.0.0'"),
            nullable=False,
        ),
        sa.Column(
            "definition", postgresql.JSONB(astext_type=sa.Text()), nullable=False
        ),
        sa.Column(
            "is_public", sa.Boolean(), server_default=sa.text("false"), nullable=False
        ),
        sa.Column(
            "created_at",
            sa.DateTime(timezone=True),
            server_default=sa.text("now()"),
            nullable=True,
        ),
        sa.Column(
            "updated_at",
            sa.DateTime(timezone=True),
            server_default=sa.text("now()"),
            nullable=True,
        ),
        sa.Column("code_template", sa.Text(), nullable=False),
        sa.Column("input_schema", sa.JSON(), nullable=False),
        sa.Column("output_schema", sa.JSON(), nullable=False),
        sa.Column("parameters_schema", sa.JSON(), nullable=True),
        sa.Column("icon", sa.String(length=10), nullable=True),
        sa.Column("color", sa.String(length=7), nullable=True),
        sa.Column("documentation", sa.Text(), nullable=True),
        sa.Column("examples", sa.JSON(), nullable=True),
        sa.Column("downloads_count", sa.Integer(), nullable=True),
        sa.Column("usage_count", sa.Integer(), nullable=True),
        sa.Column("rating_average", sa.Integer(), nullable=True),
        sa.Column("rating_count", sa.Integer(), nullable=True),
        sa.Column("user_id", sa.UUID(), nullable=False),
        sa.Column("workspace_id", sa.UUID(), nullable=True),
        sa.ForeignKeyConstraint(
            ["user_id"],
            ["synapscale_db.users.id"],
            onupdate="CASCADE",
            ondelete="CASCADE",
        ),
        sa.ForeignKeyConstraint(
            ["workspace_id"],
            ["synapscale_db.workspaces.id"],
        ),
        sa.PrimaryKeyConstraint("id"),
        schema="synapscale_db",
    )
    op.create_index(
        op.f("ix_synapscale_db_nodes_user_id"),
        "nodes",
        ["user_id"],
        unique=False,
        schema="synapscale_db",
    )
    op.create_index(
        op.f("ix_synapscale_db_nodes_workspace_id"),
        "nodes",
        ["workspace_id"],
        unique=False,
        schema="synapscale_db",
    )
    op.create_table(
        "workflows",
        sa.Column("id", sa.UUID(), nullable=False),
        sa.Column("name", sa.String(length=255), nullable=False),
        sa.Column("description", sa.Text(), nullable=True),
        sa.Column(
            "definition", postgresql.JSONB(astext_type=sa.Text()), nullable=False
        ),
        sa.Column(
            "is_active", sa.Boolean(), server_default=sa.text("true"), nullable=False
        ),
        sa.Column("user_id", sa.UUID(), nullable=False),
        sa.Column("workspace_id", sa.UUID(), nullable=True),
        sa.Column("is_public", sa.Boolean(), nullable=True),
        sa.Column("category", sa.String(length=100), nullable=True),
        sa.Column("tags", sa.JSON(), nullable=True),
        sa.Column("version", sa.String(length=20), nullable=True),
        sa.Column(
            "status",
            sa.Enum(
                "DRAFT", "PUBLISHED", "ARCHIVED", "DEPRECATED", name="workflowstatus"
            ),
            nullable=True,
        ),
        sa.Column("thumbnail_url", sa.String(length=500), nullable=True),
        sa.Column("downloads_count", sa.Integer(), nullable=True),
        sa.Column("rating_average", sa.Integer(), nullable=True),
        sa.Column("rating_count", sa.Integer(), nullable=True),
        sa.Column("execution_count", sa.Integer(), nullable=True),
        sa.Column("last_executed_at", sa.DateTime(timezone=True), nullable=True),
        sa.Column(
            "created_at",
            sa.DateTime(timezone=True),
            server_default=sa.text("now()"),
            nullable=False,
        ),
        sa.Column(
            "updated_at",
            sa.DateTime(timezone=True),
            server_default=sa.text("now()"),
            nullable=False,
        ),
        sa.ForeignKeyConstraint(
            ["user_id"],
            ["synapscale_db.users.id"],
            onupdate="CASCADE",
            ondelete="CASCADE",
        ),
        sa.ForeignKeyConstraint(
            ["workspace_id"],
            ["synapscale_db.workspaces.id"],
        ),
        sa.PrimaryKeyConstraint("id"),
        schema="synapscale_db",
    )
    op.create_index(
        op.f("ix_synapscale_db_workflows_workspace_id"),
        "workflows",
        ["workspace_id"],
        unique=False,
        schema="synapscale_db",
    )
    op.create_table(
        "workspace_activities",
        sa.Column("id", sa.UUID(), nullable=False),
        sa.Column("workspace_id", sa.UUID(), nullable=False),
        sa.Column("user_id", sa.UUID(), nullable=False),
        sa.Column("action", sa.String(length=50), nullable=False),
        sa.Column("resource_type", sa.String(length=50), nullable=False),
        sa.Column("resource_id", sa.Integer(), nullable=True),
        sa.Column("description", sa.String(length=500), nullable=False),
        sa.Column("meta_data", sa.JSON(), nullable=True),
        sa.Column("ip_address", sa.String(length=45), nullable=True),
        sa.Column("user_agent", sa.String(length=500), nullable=True),
        sa.Column("created_at", sa.DateTime(), nullable=False),
        sa.ForeignKeyConstraint(
            ["user_id"],
            ["synapscale_db.users.id"],
        ),
        sa.ForeignKeyConstraint(
            ["workspace_id"],
            ["synapscale_db.workspaces.id"],
        ),
        sa.PrimaryKeyConstraint("id"),
        schema="synapscale_db",
    )
    op.create_index(
        op.f("ix_synapscale_db_workspace_activities_action"),
        "workspace_activities",
        ["action"],
        unique=False,
        schema="synapscale_db",
    )
    op.create_index(
        op.f("ix_synapscale_db_workspace_activities_user_id"),
        "workspace_activities",
        ["user_id"],
        unique=False,
        schema="synapscale_db",
    )
    op.create_index(
        op.f("ix_synapscale_db_workspace_activities_workspace_id"),
        "workspace_activities",
        ["workspace_id"],
        unique=False,
        schema="synapscale_db",
    )
    op.create_table(
        "workspace_invitations",
        sa.Column("id", sa.UUID(), nullable=False),
        sa.Column("workspace_id", sa.UUID(), nullable=False),
        sa.Column("inviter_id", sa.UUID(), nullable=False),
        sa.Column("invited_user_id", sa.UUID(), nullable=True),
        sa.Column("email", sa.String(length=255), nullable=False),
        sa.Column(
            "role",
            sa.Enum(
                "OWNER", "ADMIN", "EDITOR", "VIEWER", "GUEST", name="workspacerole"
            ),
            nullable=False,
        ),
        sa.Column("message", sa.Text(), nullable=True),
        sa.Column("token", sa.String(length=100), nullable=False),
        sa.Column("status", sa.String(length=20), nullable=False),
        sa.Column("created_at", sa.DateTime(), nullable=False),
        sa.Column("expires_at", sa.DateTime(), nullable=False),
        sa.Column("responded_at", sa.DateTime(), nullable=True),
        sa.ForeignKeyConstraint(
            ["invited_user_id"],
            ["synapscale_db.users.id"],
        ),
        sa.ForeignKeyConstraint(
            ["inviter_id"],
            ["synapscale_db.users.id"],
        ),
        sa.ForeignKeyConstraint(
            ["workspace_id"],
            ["synapscale_db.workspaces.id"],
        ),
        sa.PrimaryKeyConstraint("id"),
        schema="synapscale_db",
    )
    op.create_index(
        op.f("ix_synapscale_db_workspace_invitations_email"),
        "workspace_invitations",
        ["email"],
        unique=False,
        schema="synapscale_db",
    )
    op.create_index(
        op.f("ix_synapscale_db_workspace_invitations_invited_user_id"),
        "workspace_invitations",
        ["invited_user_id"],
        unique=False,
        schema="synapscale_db",
    )
    op.create_index(
        op.f("ix_synapscale_db_workspace_invitations_inviter_id"),
        "workspace_invitations",
        ["inviter_id"],
        unique=False,
        schema="synapscale_db",
    )
    op.create_index(
        op.f("ix_synapscale_db_workspace_invitations_token"),
        "workspace_invitations",
        ["token"],
        unique=True,
        schema="synapscale_db",
    )
    op.create_index(
        op.f("ix_synapscale_db_workspace_invitations_workspace_id"),
        "workspace_invitations",
        ["workspace_id"],
        unique=False,
        schema="synapscale_db",
    )
    op.create_table(
        "workspace_members",
        sa.Column("id", sa.Integer(), nullable=False),
        sa.Column("workspace_id", sa.UUID(), nullable=False),
        sa.Column("user_id", sa.UUID(), nullable=False),
        sa.Column(
            "role",
            sa.Enum(
                "OWNER", "ADMIN", "EDITOR", "VIEWER", "GUEST", name="workspacerole"
            ),
            nullable=False,
        ),
        sa.Column("custom_permissions", sa.JSON(), nullable=True),
        sa.Column("status", sa.String(length=20), nullable=False),
        sa.Column("is_favorite", sa.Boolean(), nullable=False),
        sa.Column("notification_preferences", sa.JSON(), nullable=True),
        sa.Column("last_seen_at", sa.DateTime(), nullable=False),
        sa.Column("joined_at", sa.DateTime(), nullable=False),
        sa.Column("left_at", sa.DateTime(), nullable=True),
        sa.ForeignKeyConstraint(
            ["user_id"],
            ["synapscale_db.users.id"],
        ),
        sa.ForeignKeyConstraint(
            ["workspace_id"],
            ["synapscale_db.workspaces.id"],
        ),
        sa.PrimaryKeyConstraint("id"),
        schema="synapscale_db",
    )
    op.create_index(
        op.f("ix_synapscale_db_workspace_members_id"),
        "workspace_members",
        ["id"],
        unique=False,
        schema="synapscale_db",
    )
    op.create_index(
        op.f("ix_synapscale_db_workspace_members_user_id"),
        "workspace_members",
        ["user_id"],
        unique=False,
        schema="synapscale_db",
    )
    op.create_index(
        op.f("ix_synapscale_db_workspace_members_workspace_id"),
        "workspace_members",
        ["workspace_id"],
        unique=False,
        schema="synapscale_db",
    )
    op.create_table(
        "report_executions",
        sa.Column("id", sa.UUID(), nullable=False),
        sa.Column("report_id", sa.UUID(), nullable=False),
        sa.Column("user_id", sa.UUID(), nullable=True),
        sa.Column("execution_type", sa.String(length=20), nullable=False),
        sa.Column("parameters", sa.JSON(), nullable=True),
        sa.Column("status", sa.String(length=20), nullable=False),
        sa.Column("result_data", sa.JSON(), nullable=True),
        sa.Column("error_message", sa.Text(), nullable=True),
        sa.Column("execution_time_ms", sa.Integer(), nullable=True),
        sa.Column("rows_processed", sa.Integer(), nullable=True),
        sa.Column("data_size_bytes", sa.Integer(), nullable=True),
        sa.Column("started_at", sa.DateTime(), nullable=False),
        sa.Column("completed_at", sa.DateTime(), nullable=True),
        sa.ForeignKeyConstraint(
            ["report_id"],
            ["synapscale_db.custom_reports.id"],
        ),
        sa.ForeignKeyConstraint(
            ["user_id"],
            ["synapscale_db.users.id"],
        ),
        sa.PrimaryKeyConstraint("id"),
        schema="synapscale_db",
    )
    op.create_index(
        op.f("ix_synapscale_db_report_executions_report_id"),
        "report_executions",
        ["report_id"],
        unique=False,
        schema="synapscale_db",
    )
    op.create_index(
        op.f("ix_synapscale_db_report_executions_user_id"),
        "report_executions",
        ["user_id"],
        unique=False,
        schema="synapscale_db",
    )
    op.create_table(
        "workflow_executions",
        sa.Column("id", sa.UUID(), nullable=False),
        sa.Column("execution_id", sa.String(length=36), nullable=True),
        sa.Column("workflow_id", sa.UUID(), nullable=False),
        sa.Column("user_id", sa.UUID(), nullable=False),
        sa.Column(
            "status",
            sa.String(length=20),
            server_default=sa.text("'pending'"),
            nullable=False,
        ),
        sa.Column("priority", sa.Integer(), nullable=True),
        sa.Column("input_data", postgresql.JSONB(astext_type=sa.Text()), nullable=True),
        sa.Column(
            "output_data", postgresql.JSONB(astext_type=sa.Text()), nullable=True
        ),
        sa.Column("context_data", sa.JSON(), nullable=True),
        sa.Column("variables", sa.JSON(), nullable=True),
        sa.Column("total_nodes", sa.Integer(), nullable=True),
        sa.Column("completed_nodes", sa.Integer(), nullable=True),
        sa.Column("failed_nodes", sa.Integer(), nullable=True),
        sa.Column("progress_percentage", sa.Integer(), nullable=True),
        sa.Column(
            "started_at",
            sa.DateTime(timezone=True),
            server_default=sa.text("now()"),
            nullable=False,
        ),
        sa.Column("completed_at", sa.DateTime(timezone=True), nullable=True),
        sa.Column("timeout_at", sa.DateTime(timezone=True), nullable=True),
        sa.Column("estimated_duration", sa.Integer(), nullable=True),
        sa.Column("actual_duration", sa.Integer(), nullable=True),
        sa.Column("execution_log", sa.Text(), nullable=True),
        sa.Column("error_message", sa.Text(), nullable=True),
        sa.Column("error_details", sa.JSON(), nullable=True),
        sa.Column("debug_info", sa.JSON(), nullable=True),
        sa.Column("retry_count", sa.Integer(), nullable=True),
        sa.Column("max_retries", sa.Integer(), nullable=True),
        sa.Column("auto_retry", sa.Boolean(), nullable=True),
        sa.Column("notify_on_completion", sa.Boolean(), nullable=True),
        sa.Column("notify_on_failure", sa.Boolean(), nullable=True),
        sa.Column("tags", sa.JSON(), nullable=True),
        sa.Column("meta_data", sa.JSON(), nullable=True),
        sa.Column(
            "created_at",
            sa.DateTime(timezone=True),
            server_default=sa.text("now()"),
            nullable=True,
        ),
        sa.Column(
            "updated_at",
            sa.DateTime(timezone=True),
            server_default=sa.text("now()"),
            nullable=True,
        ),
        sa.ForeignKeyConstraint(
            ["user_id"],
            ["synapscale_db.users.id"],
            onupdate="CASCADE",
            ondelete="CASCADE",
        ),
        sa.ForeignKeyConstraint(
            ["workflow_id"],
            ["synapscale_db.workflows.id"],
            onupdate="CASCADE",
            ondelete="CASCADE",
        ),
        sa.PrimaryKeyConstraint("id"),
        schema="synapscale_db",
    )
    op.create_index(
        op.f("ix_synapscale_db_workflow_executions_execution_id"),
        "workflow_executions",
        ["execution_id"],
        unique=True,
        schema="synapscale_db",
    )
    op.create_index(
        op.f("ix_synapscale_db_workflow_executions_priority"),
        "workflow_executions",
        ["priority"],
        unique=False,
        schema="synapscale_db",
    )
    op.create_index(
        op.f("ix_synapscale_db_workflow_executions_user_id"),
        "workflow_executions",
        ["user_id"],
        unique=False,
        schema="synapscale_db",
    )
    op.create_table(
        "workflow_nodes",
        sa.Column("id", sa.UUID(), nullable=False),
        sa.Column("workflow_id", sa.UUID(), nullable=False),
        sa.Column("node_id", sa.UUID(), nullable=False),
        sa.Column("instance_name", sa.String(length=200), nullable=True),
        sa.Column("position_x", sa.Integer(), nullable=False),
        sa.Column("position_y", sa.Integer(), nullable=False),
        sa.Column("configuration", sa.JSON(), nullable=True),
        sa.Column(
            "created_at",
            sa.DateTime(timezone=True),
            server_default=sa.text("now()"),
            nullable=True,
        ),
        sa.ForeignKeyConstraint(
            ["node_id"],
            ["synapscale_db.nodes.id"],
        ),
        sa.ForeignKeyConstraint(
            ["workflow_id"],
            ["synapscale_db.workflows.id"],
        ),
        sa.PrimaryKeyConstraint("id"),
        schema="synapscale_db",
    )
    op.create_index(
        op.f("ix_synapscale_db_workflow_nodes_node_id"),
        "workflow_nodes",
        ["node_id"],
        unique=False,
        schema="synapscale_db",
    )
    op.create_index(
        op.f("ix_synapscale_db_workflow_nodes_workflow_id"),
        "workflow_nodes",
        ["workflow_id"],
        unique=False,
        schema="synapscale_db",
    )
    op.create_table(
        "workflow_templates",
        sa.Column("id", sa.UUID(), nullable=False),
        sa.Column("name", sa.String(length=255), nullable=False),
        sa.Column("description", sa.Text(), nullable=True),
        sa.Column("category", sa.String(length=100), nullable=False),
        sa.Column("tags", sa.JSON(), nullable=True),
        sa.Column(
            "workflow_definition",
            postgresql.JSONB(astext_type=sa.Text()),
            nullable=False,
        ),
        sa.Column("preview_image", sa.String(length=500), nullable=True),
        sa.Column("author_id", sa.UUID(), nullable=False),
        sa.Column(
            "version",
            sa.String(length=50),
            server_default=sa.text("'1.0.0'"),
            nullable=False,
        ),
        sa.Column(
            "is_public", sa.Boolean(), server_default=sa.text("false"), nullable=False
        ),
        sa.Column(
            "is_featured", sa.Boolean(), server_default=sa.text("false"), nullable=False
        ),
        sa.Column(
            "downloads_count", sa.Integer(), server_default=sa.text("0"), nullable=False
        ),
        sa.Column(
            "rating_average",
            sa.DECIMAL(precision=3, scale=2),
            server_default=sa.text("0.00"),
            nullable=False,
        ),
        sa.Column(
            "rating_count", sa.Integer(), server_default=sa.text("0"), nullable=False
        ),
        sa.Column(
            "price",
            sa.DECIMAL(precision=10, scale=2),
            server_default=sa.text("0.00"),
            nullable=False,
        ),
        sa.Column(
            "is_free", sa.Boolean(), server_default=sa.text("true"), nullable=False
        ),
        sa.Column(
            "license",
            sa.String(length=50),
            server_default=sa.text("'MIT'"),
            nullable=False,
        ),
        sa.Column(
            "created_at",
            sa.DateTime(timezone=True),
            server_default=sa.text("now()"),
            nullable=False,
        ),
        sa.Column(
            "updated_at",
            sa.DateTime(timezone=True),
            server_default=sa.text("now()"),
            nullable=False,
        ),
        sa.Column("title", sa.String(length=255), nullable=False),
        sa.Column("short_description", sa.String(length=500), nullable=True),
        sa.Column("original_workflow_id", sa.UUID(), nullable=True),
        sa.Column("status", sa.String(length=20), nullable=True),
        sa.Column("is_verified", sa.Boolean(), nullable=True),
        sa.Column("license_type", sa.String(length=20), nullable=True),
        sa.Column("workflow_data", sa.JSON(), nullable=False),
        sa.Column("nodes_data", sa.JSON(), nullable=False),
        sa.Column("connections_data", sa.JSON(), nullable=True),
        sa.Column("required_variables", sa.JSON(), nullable=True),
        sa.Column("optional_variables", sa.JSON(), nullable=True),
        sa.Column("default_config", sa.JSON(), nullable=True),
        sa.Column("compatibility_version", sa.String(length=20), nullable=True),
        sa.Column("estimated_duration", sa.Integer(), nullable=True),
        sa.Column("complexity_level", sa.Integer(), nullable=True),
        sa.Column("download_count", sa.Integer(), nullable=True),
        sa.Column("usage_count", sa.Integer(), nullable=True),
        sa.Column("view_count", sa.Integer(), nullable=True),
        sa.Column("keywords", sa.JSON(), nullable=True),
        sa.Column("use_cases", sa.JSON(), nullable=True),
        sa.Column("industries", sa.JSON(), nullable=True),
        sa.Column("thumbnail_url", sa.String(length=500), nullable=True),
        sa.Column("preview_images", sa.JSON(), nullable=True),
        sa.Column("demo_video_url", sa.String(length=500), nullable=True),
        sa.Column("documentation", sa.Text(), nullable=True),
        sa.Column("setup_instructions", sa.Text(), nullable=True),
        sa.Column("changelog", sa.JSON(), nullable=True),
        sa.Column("support_email", sa.String(length=255), nullable=True),
        sa.Column("repository_url", sa.String(length=500), nullable=True),
        sa.Column("documentation_url", sa.String(length=500), nullable=True),
        sa.Column("published_at", sa.DateTime(timezone=True), nullable=True),
        sa.Column("last_used_at", sa.DateTime(timezone=True), nullable=True),
        sa.ForeignKeyConstraint(
            ["author_id"],
            ["synapscale_db.users.id"],
            onupdate="CASCADE",
            ondelete="CASCADE",
        ),
        sa.ForeignKeyConstraint(
            ["original_workflow_id"],
            ["synapscale_db.workflows.id"],
        ),
        sa.PrimaryKeyConstraint("id"),
        schema="synapscale_db",
    )
    op.create_index(
        op.f("ix_synapscale_db_workflow_templates_download_count"),
        "workflow_templates",
        ["download_count"],
        unique=False,
        schema="synapscale_db",
    )
    op.create_index(
        op.f("ix_synapscale_db_workflow_templates_is_verified"),
        "workflow_templates",
        ["is_verified"],
        unique=False,
        schema="synapscale_db",
    )
    op.create_index(
        op.f("ix_synapscale_db_workflow_templates_license_type"),
        "workflow_templates",
        ["license_type"],
        unique=False,
        schema="synapscale_db",
    )
    op.create_index(
        op.f("ix_synapscale_db_workflow_templates_original_workflow_id"),
        "workflow_templates",
        ["original_workflow_id"],
        unique=False,
        schema="synapscale_db",
    )
    op.create_index(
        op.f("ix_synapscale_db_workflow_templates_published_at"),
        "workflow_templates",
        ["published_at"],
        unique=False,
        schema="synapscale_db",
    )
    op.create_index(
        op.f("ix_synapscale_db_workflow_templates_status"),
        "workflow_templates",
        ["status"],
        unique=False,
        schema="synapscale_db",
    )
    op.create_table(
        "workspace_projects",
        sa.Column("id", sa.UUID(), nullable=False),
        sa.Column("workspace_id", sa.UUID(), nullable=False),
        sa.Column("workflow_id", sa.UUID(), nullable=False),
        sa.Column("name", sa.String(length=100), nullable=False),
        sa.Column("description", sa.Text(), nullable=True),
        sa.Column("color", sa.String(length=7), nullable=True),
        sa.Column("allow_concurrent_editing", sa.Boolean(), nullable=False),
        sa.Column("auto_save_interval", sa.Integer(), nullable=True),
        sa.Column("version_control_enabled", sa.Boolean(), nullable=False),
        sa.Column("status", sa.String(length=20), nullable=False),
        sa.Column("is_template", sa.Boolean(), nullable=False),
        sa.Column("is_public", sa.Boolean(), nullable=False),
        sa.Column("collaborator_count", sa.Integer(), nullable=False),
        sa.Column("edit_count", sa.Integer(), nullable=False),
        sa.Column("comment_count", sa.Integer(), nullable=False),
        sa.Column("created_at", sa.DateTime(), nullable=False),
        sa.Column("updated_at", sa.DateTime(), nullable=False),
        sa.Column("last_edited_at", sa.DateTime(), nullable=False),
        sa.ForeignKeyConstraint(
            ["workflow_id"],
            ["synapscale_db.workflows.id"],
        ),
        sa.ForeignKeyConstraint(
            ["workspace_id"],
            ["synapscale_db.workspaces.id"],
        ),
        sa.PrimaryKeyConstraint("id"),
        schema="synapscale_db",
    )
    op.create_index(
        op.f("ix_synapscale_db_workspace_projects_workflow_id"),
        "workspace_projects",
        ["workflow_id"],
        unique=False,
        schema="synapscale_db",
    )
    op.create_index(
        op.f("ix_synapscale_db_workspace_projects_workspace_id"),
        "workspace_projects",
        ["workspace_id"],
        unique=False,
        schema="synapscale_db",
    )
    op.create_table(
        "analytics_events",
        sa.Column("id", sa.UUID(), nullable=False),
        sa.Column("event_id", sa.String(length=36), nullable=False),
        sa.Column("event_type", sa.String(length=100), nullable=False),
        sa.Column("category", sa.String(length=50), nullable=False),
        sa.Column("action", sa.String(length=100), nullable=False),
        sa.Column("label", sa.String(length=200), nullable=True),
        sa.Column("user_id", sa.UUID(), nullable=True),
        sa.Column("session_id", sa.String(length=255), nullable=True),
        sa.Column("anonymous_id", sa.String(length=100), nullable=True),
        sa.Column("ip_address", sa.Text(), nullable=True),
        sa.Column("user_agent", sa.Text(), nullable=True),
        sa.Column("referrer", sa.String(length=1000), nullable=True),
        sa.Column("page_url", sa.String(length=1000), nullable=True),
        sa.Column(
            "properties",
            postgresql.JSONB(astext_type=sa.Text()),
            server_default=sa.text("'{}'"),
            nullable=False,
        ),
        sa.Column("value", sa.Float(), nullable=True),
        sa.Column("workspace_id", sa.UUID(), nullable=True),
        sa.Column("project_id", sa.UUID(), nullable=False),
        sa.Column("workflow_id", sa.UUID(), nullable=True),
        sa.Column("country", sa.String(length=2), nullable=True),
        sa.Column("region", sa.String(length=100), nullable=True),
        sa.Column("city", sa.String(length=100), nullable=True),
        sa.Column("timezone", sa.String(length=50), nullable=True),
        sa.Column("device_type", sa.String(length=20), nullable=True),
        sa.Column("os", sa.String(length=50), nullable=True),
        sa.Column("browser", sa.String(length=50), nullable=True),
        sa.Column("screen_resolution", sa.String(length=20), nullable=True),
        sa.Column(
            "timestamp",
            sa.DateTime(timezone=True),
            server_default=sa.text("now()"),
            nullable=False,
        ),
        sa.ForeignKeyConstraint(
            ["project_id"],
            ["synapscale_db.workspace_projects.id"],
        ),
        sa.ForeignKeyConstraint(
            ["user_id"],
            ["synapscale_db.users.id"],
            onupdate="CASCADE",
            ondelete="SET NULL",
        ),
        sa.ForeignKeyConstraint(
            ["workflow_id"],
            ["synapscale_db.workflows.id"],
        ),
        sa.ForeignKeyConstraint(
            ["workspace_id"],
            ["synapscale_db.workspaces.id"],
        ),
        sa.PrimaryKeyConstraint("id"),
        schema="synapscale_db",
    )
    op.create_index(
        op.f("ix_synapscale_db_analytics_events_action"),
        "analytics_events",
        ["action"],
        unique=False,
        schema="synapscale_db",
    )
    op.create_index(
        op.f("ix_synapscale_db_analytics_events_anonymous_id"),
        "analytics_events",
        ["anonymous_id"],
        unique=False,
        schema="synapscale_db",
    )
    op.create_index(
        op.f("ix_synapscale_db_analytics_events_category"),
        "analytics_events",
        ["category"],
        unique=False,
        schema="synapscale_db",
    )
    op.create_index(
        op.f("ix_synapscale_db_analytics_events_event_id"),
        "analytics_events",
        ["event_id"],
        unique=True,
        schema="synapscale_db",
    )
    op.create_index(
        op.f("ix_synapscale_db_analytics_events_label"),
        "analytics_events",
        ["label"],
        unique=False,
        schema="synapscale_db",
    )
    op.create_index(
        op.f("ix_synapscale_db_analytics_events_project_id"),
        "analytics_events",
        ["project_id"],
        unique=False,
        schema="synapscale_db",
    )
    op.create_index(
        op.f("ix_synapscale_db_analytics_events_workflow_id"),
        "analytics_events",
        ["workflow_id"],
        unique=False,
        schema="synapscale_db",
    )
    op.create_index(
        op.f("ix_synapscale_db_analytics_events_workspace_id"),
        "analytics_events",
        ["workspace_id"],
        unique=False,
        schema="synapscale_db",
    )
    op.create_table(
        "workflow_execution_queue",
        sa.Column("id", sa.Integer(), nullable=False),
        sa.Column("queue_id", sa.String(length=36), nullable=True),
        sa.Column("workflow_execution_id", sa.UUID(), nullable=False),
        sa.Column("user_id", sa.UUID(), nullable=False),
        sa.Column("priority", sa.Integer(), nullable=True),
        sa.Column("scheduled_at", sa.DateTime(timezone=True), nullable=True),
        sa.Column("started_at", sa.DateTime(timezone=True), nullable=True),
        sa.Column("completed_at", sa.DateTime(timezone=True), nullable=True),
        sa.Column("status", sa.String(length=50), nullable=True),
        sa.Column("worker_id", sa.String(length=100), nullable=True),
        sa.Column("max_execution_time", sa.Integer(), nullable=True),
        sa.Column("retry_count", sa.Integer(), nullable=True),
        sa.Column("max_retries", sa.Integer(), nullable=True),
        sa.Column("meta_data", sa.JSON(), nullable=True),
        sa.Column(
            "created_at",
            sa.DateTime(timezone=True),
            server_default=sa.text("now()"),
            nullable=True,
        ),
        sa.Column(
            "updated_at",
            sa.DateTime(timezone=True),
            server_default=sa.text("now()"),
            nullable=True,
        ),
        sa.ForeignKeyConstraint(
            ["user_id"],
            ["synapscale_db.users.id"],
            onupdate="CASCADE",
            ondelete="CASCADE",
        ),
        sa.ForeignKeyConstraint(
            ["workflow_execution_id"],
            ["synapscale_db.workflow_executions.id"],
        ),
        sa.PrimaryKeyConstraint("id"),
        schema="synapscale_db",
    )
    op.create_index(
        op.f("ix_synapscale_db_workflow_execution_queue_id"),
        "workflow_execution_queue",
        ["id"],
        unique=False,
        schema="synapscale_db",
    )
    op.create_index(
        op.f("ix_synapscale_db_workflow_execution_queue_priority"),
        "workflow_execution_queue",
        ["priority"],
        unique=False,
        schema="synapscale_db",
    )
    op.create_index(
        op.f("ix_synapscale_db_workflow_execution_queue_queue_id"),
        "workflow_execution_queue",
        ["queue_id"],
        unique=True,
        schema="synapscale_db",
    )
    op.create_index(
        op.f("ix_synapscale_db_workflow_execution_queue_scheduled_at"),
        "workflow_execution_queue",
        ["scheduled_at"],
        unique=False,
        schema="synapscale_db",
    )
    op.create_index(
        op.f("ix_synapscale_db_workflow_execution_queue_status"),
        "workflow_execution_queue",
        ["status"],
        unique=False,
        schema="synapscale_db",
    )
    op.create_index(
        op.f("ix_synapscale_db_workflow_execution_queue_user_id"),
        "workflow_execution_queue",
        ["user_id"],
        unique=False,
        schema="synapscale_db",
    )
    op.create_index(
        op.f("ix_synapscale_db_workflow_execution_queue_worker_id"),
        "workflow_execution_queue",
        ["worker_id"],
        unique=False,
        schema="synapscale_db",
    )
    op.create_index(
        op.f("ix_synapscale_db_workflow_execution_queue_workflow_execution_id"),
        "workflow_execution_queue",
        ["workflow_execution_id"],
        unique=False,
        schema="synapscale_db",
    )
    op.create_table(
        "node_executions",
        sa.Column("id", sa.Integer(), nullable=False),
        sa.Column("execution_id", sa.String(length=36), nullable=True),
        sa.Column("workflow_execution_id", sa.UUID(), nullable=False),
        sa.Column("node_id", sa.UUID(), nullable=False),
        sa.Column("node_key", sa.String(length=255), nullable=False),
        sa.Column("node_type", sa.String(length=100), nullable=False),
        sa.Column("node_name", sa.String(length=255), nullable=True),
        sa.Column(
            "status",
            sa.Enum(
                "PENDING",
                "RUNNING",
                "COMPLETED",
                "FAILED",
                "SKIPPED",
                "RETRY",
                name="nodeexecutionstatus",
            ),
            nullable=True,
        ),
        sa.Column("execution_order", sa.Integer(), nullable=False),
        sa.Column("input_data", sa.JSON(), nullable=True),
        sa.Column("output_data", sa.JSON(), nullable=True),
        sa.Column("config_data", sa.JSON(), nullable=True),
        sa.Column("started_at", sa.DateTime(timezone=True), nullable=True),
        sa.Column("completed_at", sa.DateTime(timezone=True), nullable=True),
        sa.Column("timeout_at", sa.DateTime(timezone=True), nullable=True),
        sa.Column("duration_ms", sa.Integer(), nullable=True),
        sa.Column("execution_log", sa.Text(), nullable=True),
        sa.Column("error_message", sa.Text(), nullable=True),
        sa.Column("error_details", sa.JSON(), nullable=True),
        sa.Column("debug_info", sa.JSON(), nullable=True),
        sa.Column("retry_count", sa.Integer(), nullable=True),
        sa.Column("max_retries", sa.Integer(), nullable=True),
        sa.Column("retry_delay", sa.Integer(), nullable=True),
        sa.Column("dependencies", sa.JSON(), nullable=True),
        sa.Column("dependents", sa.JSON(), nullable=True),
        sa.Column("meta_data", sa.JSON(), nullable=True),
        sa.Column(
            "created_at",
            sa.DateTime(timezone=True),
            server_default=sa.text("now()"),
            nullable=True,
        ),
        sa.Column(
            "updated_at",
            sa.DateTime(timezone=True),
            server_default=sa.text("now()"),
            nullable=True,
        ),
        sa.ForeignKeyConstraint(
            ["node_id"],
            ["synapscale_db.nodes.id"],
        ),
        sa.ForeignKeyConstraint(
            ["workflow_execution_id"],
            ["synapscale_db.workflow_executions.id"],
        ),
        sa.PrimaryKeyConstraint("id"),
        schema="synapscale_db",
    )
    op.create_index(
        op.f("ix_synapscale_db_node_executions_execution_id"),
        "node_executions",
        ["execution_id"],
        unique=False,
        schema="synapscale_db",
    )
    op.create_index(
        op.f("ix_synapscale_db_node_executions_execution_order"),
        "node_executions",
        ["execution_order"],
        unique=False,
        schema="synapscale_db",
    )
    op.create_index(
        op.f("ix_synapscale_db_node_executions_id"),
        "node_executions",
        ["id"],
        unique=False,
        schema="synapscale_db",
    )
    op.create_index(
        op.f("ix_synapscale_db_node_executions_node_id"),
        "node_executions",
        ["node_id"],
        unique=False,
        schema="synapscale_db",
    )
    op.create_index(
        op.f("ix_synapscale_db_node_executions_node_key"),
        "node_executions",
        ["node_key"],
        unique=False,
        schema="synapscale_db",
    )
    op.create_index(
        op.f("ix_synapscale_db_node_executions_node_type"),
        "node_executions",
        ["node_type"],
        unique=False,
        schema="synapscale_db",
    )
    op.create_index(
        op.f("ix_synapscale_db_node_executions_status"),
        "node_executions",
        ["status"],
        unique=False,
        schema="synapscale_db",
    )
    op.create_index(
        op.f("ix_synapscale_db_node_executions_workflow_execution_id"),
        "node_executions",
        ["workflow_execution_id"],
        unique=False,
        schema="synapscale_db",
    )
    op.create_table(
        "project_collaborators",
        sa.Column("id", sa.UUID(), nullable=False),
        sa.Column("project_id", sa.UUID(), nullable=False),
        sa.Column("user_id", sa.UUID(), nullable=False),
        sa.Column("can_edit", sa.Boolean(), nullable=False),
        sa.Column("can_comment", sa.Boolean(), nullable=False),
        sa.Column("can_share", sa.Boolean(), nullable=False),
        sa.Column("can_delete", sa.Boolean(), nullable=False),
        sa.Column("is_online", sa.Boolean(), nullable=False),
        sa.Column("current_cursor_position", sa.JSON(), nullable=True),
        sa.Column("last_edit_at", sa.DateTime(), nullable=True),
        sa.Column("added_at", sa.DateTime(), nullable=False),
        sa.Column("last_seen_at", sa.DateTime(), nullable=False),
        sa.ForeignKeyConstraint(
            ["project_id"],
            ["synapscale_db.workspace_projects.id"],
        ),
        sa.ForeignKeyConstraint(
            ["user_id"],
            ["synapscale_db.users.id"],
        ),
        sa.PrimaryKeyConstraint("id"),
        schema="synapscale_db",
    )
    op.create_index(
        op.f("ix_synapscale_db_project_collaborators_project_id"),
        "project_collaborators",
        ["project_id"],
        unique=False,
        schema="synapscale_db",
    )
    op.create_index(
        op.f("ix_synapscale_db_project_collaborators_user_id"),
        "project_collaborators",
        ["user_id"],
        unique=False,
        schema="synapscale_db",
    )
    op.create_table(
        "project_comments",
        sa.Column("id", sa.UUID(), nullable=False),
        sa.Column("project_id", sa.UUID(), nullable=False),
        sa.Column("user_id", sa.UUID(), nullable=False),
        sa.Column("parent_id", sa.UUID(), nullable=True),
        sa.Column("content", sa.Text(), nullable=False),
        sa.Column("content_type", sa.String(length=20), nullable=False),
        sa.Column("node_id", sa.String(length=36), nullable=True),
        sa.Column("position_x", sa.Float(), nullable=True),
        sa.Column("position_y", sa.Float(), nullable=True),
        sa.Column("is_resolved", sa.Boolean(), nullable=False),
        sa.Column("is_edited", sa.Boolean(), nullable=False),
        sa.Column("created_at", sa.DateTime(), nullable=False),
        sa.Column("updated_at", sa.DateTime(), nullable=False),
        sa.Column("resolved_at", sa.DateTime(), nullable=True),
        sa.ForeignKeyConstraint(
            ["parent_id"],
            ["synapscale_db.project_comments.id"],
        ),
        sa.ForeignKeyConstraint(
            ["project_id"],
            ["synapscale_db.workspace_projects.id"],
        ),
        sa.ForeignKeyConstraint(
            ["user_id"],
            ["synapscale_db.users.id"],
        ),
        sa.PrimaryKeyConstraint("id"),
        schema="synapscale_db",
    )
    op.create_index(
        op.f("ix_synapscale_db_project_comments_parent_id"),
        "project_comments",
        ["parent_id"],
        unique=False,
        schema="synapscale_db",
    )
    op.create_index(
        op.f("ix_synapscale_db_project_comments_project_id"),
        "project_comments",
        ["project_id"],
        unique=False,
        schema="synapscale_db",
    )
    op.create_index(
        op.f("ix_synapscale_db_project_comments_user_id"),
        "project_comments",
        ["user_id"],
        unique=False,
        schema="synapscale_db",
    )
    op.create_table(
        "project_versions",
        sa.Column("id", sa.UUID(), nullable=False),
        sa.Column("project_id", sa.UUID(), nullable=False),
        sa.Column("user_id", sa.UUID(), nullable=False),
        sa.Column("version_number", sa.Integer(), nullable=False),
        sa.Column("version_name", sa.String(length=100), nullable=True),
        sa.Column("description", sa.Text(), nullable=True),
        sa.Column("workflow_data", sa.JSON(), nullable=False),
        sa.Column("changes_summary", sa.JSON(), nullable=True),
        sa.Column("file_size", sa.Integer(), nullable=True),
        sa.Column("checksum", sa.String(length=64), nullable=True),
        sa.Column("is_major", sa.Boolean(), nullable=False),
        sa.Column("is_auto_save", sa.Boolean(), nullable=False),
        sa.Column("created_at", sa.DateTime(), nullable=False),
        sa.ForeignKeyConstraint(
            ["project_id"],
            ["synapscale_db.workspace_projects.id"],
        ),
        sa.ForeignKeyConstraint(
            ["user_id"],
            ["synapscale_db.users.id"],
        ),
        sa.PrimaryKeyConstraint("id"),
        schema="synapscale_db",
    )
    op.create_index(
        op.f("ix_synapscale_db_project_versions_project_id"),
        "project_versions",
        ["project_id"],
        unique=False,
        schema="synapscale_db",
    )
    op.create_index(
        op.f("ix_synapscale_db_project_versions_user_id"),
        "project_versions",
        ["user_id"],
        unique=False,
        schema="synapscale_db",
    )
    op.create_table(
        "template_downloads",
        sa.Column("id", sa.Integer(), nullable=False),
        sa.Column("template_id", sa.UUID(), nullable=False),
        sa.Column("user_id", sa.UUID(), nullable=False),
        sa.Column("download_type", sa.String(length=20), nullable=True),
        sa.Column("ip_address", sa.String(length=45), nullable=True),
        sa.Column("user_agent", sa.String(length=500), nullable=True),
        sa.Column("template_version", sa.String(length=20), nullable=True),
        sa.Column(
            "downloaded_at",
            sa.DateTime(timezone=True),
            server_default=sa.text("now()"),
            nullable=True,
        ),
        sa.ForeignKeyConstraint(
            ["template_id"],
            ["synapscale_db.workflow_templates.id"],
        ),
        sa.ForeignKeyConstraint(
            ["user_id"],
            ["synapscale_db.users.id"],
        ),
        sa.PrimaryKeyConstraint("id"),
        schema="synapscale_db",
    )
    op.create_index(
        op.f("ix_synapscale_db_template_downloads_downloaded_at"),
        "template_downloads",
        ["downloaded_at"],
        unique=False,
        schema="synapscale_db",
    )
    op.create_index(
        op.f("ix_synapscale_db_template_downloads_id"),
        "template_downloads",
        ["id"],
        unique=False,
        schema="synapscale_db",
    )
    op.create_index(
        op.f("ix_synapscale_db_template_downloads_template_id"),
        "template_downloads",
        ["template_id"],
        unique=False,
        schema="synapscale_db",
    )
    op.create_index(
        op.f("ix_synapscale_db_template_downloads_user_id"),
        "template_downloads",
        ["user_id"],
        unique=False,
        schema="synapscale_db",
    )
    op.create_table(
        "template_favorites",
        sa.Column("id", sa.Integer(), nullable=False),
        sa.Column("template_id", sa.UUID(), nullable=False),
        sa.Column("user_id", sa.UUID(), nullable=False),
        sa.Column("notes", sa.Text(), nullable=True),
        sa.Column(
            "created_at",
            sa.DateTime(timezone=True),
            server_default=sa.text("now()"),
            nullable=True,
        ),
        sa.ForeignKeyConstraint(
            ["template_id"],
            ["synapscale_db.workflow_templates.id"],
        ),
        sa.ForeignKeyConstraint(
            ["user_id"],
            ["synapscale_db.users.id"],
        ),
        sa.PrimaryKeyConstraint("id"),
        schema="synapscale_db",
        sqlite_autoincrement=True,
    )
    op.create_index(
        op.f("ix_synapscale_db_template_favorites_id"),
        "template_favorites",
        ["id"],
        unique=False,
        schema="synapscale_db",
    )
    op.create_index(
        op.f("ix_synapscale_db_template_favorites_template_id"),
        "template_favorites",
        ["template_id"],
        unique=False,
        schema="synapscale_db",
    )
    op.create_index(
        op.f("ix_synapscale_db_template_favorites_user_id"),
        "template_favorites",
        ["user_id"],
        unique=False,
        schema="synapscale_db",
    )
    op.create_table(
        "template_reviews",
        sa.Column("id", sa.Integer(), nullable=False),
        sa.Column("template_id", sa.UUID(), nullable=False),
        sa.Column("user_id", sa.UUID(), nullable=False),
        sa.Column("rating", sa.Integer(), nullable=False),
        sa.Column("title", sa.String(length=255), nullable=True),
        sa.Column("comment", sa.Text(), nullable=True),
        sa.Column("ease_of_use", sa.Integer(), nullable=True),
        sa.Column("documentation_quality", sa.Integer(), nullable=True),
        sa.Column("performance", sa.Integer(), nullable=True),
        sa.Column("value_for_money", sa.Integer(), nullable=True),
        sa.Column("is_verified_purchase", sa.Boolean(), nullable=True),
        sa.Column("is_helpful_count", sa.Integer(), nullable=True),
        sa.Column("is_reported", sa.Boolean(), nullable=True),
        sa.Column("version_reviewed", sa.String(length=20), nullable=True),
        sa.Column(
            "created_at",
            sa.DateTime(timezone=True),
            server_default=sa.text("now()"),
            nullable=True,
        ),
        sa.Column(
            "updated_at",
            sa.DateTime(timezone=True),
            server_default=sa.text("now()"),
            nullable=True,
        ),
        sa.ForeignKeyConstraint(
            ["template_id"],
            ["synapscale_db.workflow_templates.id"],
        ),
        sa.ForeignKeyConstraint(
            ["user_id"],
            ["synapscale_db.users.id"],
        ),
        sa.PrimaryKeyConstraint("id"),
        schema="synapscale_db",
    )
    op.create_index(
        op.f("ix_synapscale_db_template_reviews_id"),
        "template_reviews",
        ["id"],
        unique=False,
        schema="synapscale_db",
    )
    op.create_index(
        op.f("ix_synapscale_db_template_reviews_template_id"),
        "template_reviews",
        ["template_id"],
        unique=False,
        schema="synapscale_db",
    )
    op.create_index(
        op.f("ix_synapscale_db_template_reviews_user_id"),
        "template_reviews",
        ["user_id"],
        unique=False,
        schema="synapscale_db",
    )
    op.create_table(
        "template_usage",
        sa.Column("id", sa.Integer(), nullable=False),
        sa.Column("template_id", sa.UUID(), nullable=False),
        sa.Column("user_id", sa.UUID(), nullable=False),
        sa.Column("workflow_id", sa.UUID(), nullable=True),
        sa.Column("usage_type", sa.String(length=20), nullable=False),
        sa.Column("success", sa.Boolean(), nullable=True),
        sa.Column("template_version", sa.String(length=20), nullable=True),
        sa.Column("modifications_made", sa.JSON(), nullable=True),
        sa.Column("execution_time", sa.Integer(), nullable=True),
        sa.Column("ip_address", sa.String(length=45), nullable=True),
        sa.Column("user_agent", sa.String(length=500), nullable=True),
        sa.Column(
            "used_at",
            sa.DateTime(timezone=True),
            server_default=sa.text("now()"),
            nullable=True,
        ),
        sa.ForeignKeyConstraint(
            ["template_id"],
            ["synapscale_db.workflow_templates.id"],
        ),
        sa.ForeignKeyConstraint(
            ["user_id"],
            ["synapscale_db.users.id"],
        ),
        sa.ForeignKeyConstraint(
            ["workflow_id"],
            ["synapscale_db.workflows.id"],
        ),
        sa.PrimaryKeyConstraint("id"),
        schema="synapscale_db",
    )
    op.create_index(
        op.f("ix_synapscale_db_template_usage_id"),
        "template_usage",
        ["id"],
        unique=False,
        schema="synapscale_db",
    )
    op.create_index(
        op.f("ix_synapscale_db_template_usage_template_id"),
        "template_usage",
        ["template_id"],
        unique=False,
        schema="synapscale_db",
    )
    op.create_index(
        op.f("ix_synapscale_db_template_usage_used_at"),
        "template_usage",
        ["used_at"],
        unique=False,
        schema="synapscale_db",
    )
    op.create_index(
        op.f("ix_synapscale_db_template_usage_user_id"),
        "template_usage",
        ["user_id"],
        unique=False,
        schema="synapscale_db",
    )
    op.create_index(
        op.f("ix_synapscale_db_template_usage_workflow_id"),
        "template_usage",
        ["workflow_id"],
        unique=False,
        schema="synapscale_db",
    )
    op.create_table(
        "workflow_connections",
        sa.Column("id", sa.UUID(), nullable=False),
        sa.Column("workflow_id", sa.UUID(), nullable=False),
        sa.Column("source_node_id", sa.UUID(), nullable=False),
        sa.Column("target_node_id", sa.UUID(), nullable=False),
        sa.Column("source_port", sa.String(length=100), nullable=True),
        sa.Column("target_port", sa.String(length=100), nullable=True),
        sa.Column(
            "created_at",
            sa.DateTime(timezone=True),
            server_default=sa.text("now()"),
            nullable=True,
        ),
        sa.ForeignKeyConstraint(
            ["source_node_id"],
            ["synapscale_db.workflow_nodes.id"],
        ),
        sa.ForeignKeyConstraint(
            ["target_node_id"],
            ["synapscale_db.workflow_nodes.id"],
        ),
        sa.ForeignKeyConstraint(
            ["workflow_id"],
            ["synapscale_db.workflows.id"],
        ),
        sa.PrimaryKeyConstraint("id"),
        schema="synapscale_db",
    )
    op.create_index(
        op.f("ix_synapscale_db_workflow_connections_workflow_id"),
        "workflow_connections",
        ["workflow_id"],
        unique=False,
        schema="synapscale_db",
    )
    op.create_table(
        "workflow_execution_metrics",
        sa.Column("id", sa.Integer(), nullable=False),
        sa.Column("workflow_execution_id", sa.UUID(), nullable=False),
        sa.Column("node_execution_id", sa.Integer(), nullable=True),
        sa.Column("metric_type", sa.String(length=100), nullable=False),
        sa.Column("metric_name", sa.String(length=255), nullable=False),
        sa.Column("value_numeric", sa.Integer(), nullable=True),
        sa.Column("value_float", sa.String(length=50), nullable=True),
        sa.Column("value_text", sa.Text(), nullable=True),
        sa.Column("value_json", sa.JSON(), nullable=True),
        sa.Column("context", sa.String(length=255), nullable=True),
        sa.Column("tags", sa.JSON(), nullable=True),
        sa.Column(
            "measured_at",
            sa.DateTime(timezone=True),
            server_default=sa.text("now()"),
            nullable=True,
        ),
        sa.Column(
            "created_at",
            sa.DateTime(timezone=True),
            server_default=sa.text("now()"),
            nullable=True,
        ),
        sa.ForeignKeyConstraint(
            ["node_execution_id"],
            ["synapscale_db.node_executions.id"],
        ),
        sa.ForeignKeyConstraint(
            ["workflow_execution_id"],
            ["synapscale_db.workflow_executions.id"],
        ),
        sa.PrimaryKeyConstraint("id"),
        schema="synapscale_db",
    )
    op.create_index(
        op.f("ix_synapscale_db_workflow_execution_metrics_context"),
        "workflow_execution_metrics",
        ["context"],
        unique=False,
        schema="synapscale_db",
    )
    op.create_index(
        op.f("ix_synapscale_db_workflow_execution_metrics_id"),
        "workflow_execution_metrics",
        ["id"],
        unique=False,
        schema="synapscale_db",
    )
    op.create_index(
        op.f("ix_synapscale_db_workflow_execution_metrics_measured_at"),
        "workflow_execution_metrics",
        ["measured_at"],
        unique=False,
        schema="synapscale_db",
    )
    op.create_index(
        op.f("ix_synapscale_db_workflow_execution_metrics_metric_name"),
        "workflow_execution_metrics",
        ["metric_name"],
        unique=False,
        schema="synapscale_db",
    )
    op.create_index(
        op.f("ix_synapscale_db_workflow_execution_metrics_metric_type"),
        "workflow_execution_metrics",
        ["metric_type"],
        unique=False,
        schema="synapscale_db",
    )
    op.create_index(
        op.f("ix_synapscale_db_workflow_execution_metrics_node_execution_id"),
        "workflow_execution_metrics",
        ["node_execution_id"],
        unique=False,
        schema="synapscale_db",
    )
    op.create_index(
        op.f("ix_synapscale_db_workflow_execution_metrics_workflow_execution_id"),
        "workflow_execution_metrics",
        ["workflow_execution_id"],
        unique=False,
        schema="synapscale_db",
    )
    # ### end Alembic commands ###


def downgrade() -> None:
    """Downgrade schema."""
    # ### commands auto generated by Alembic - please adjust! ###
    op.drop_index(
        op.f("ix_synapscale_db_workflow_execution_metrics_workflow_execution_id"),
        table_name="workflow_execution_metrics",
        schema="synapscale_db",
    )
    op.drop_index(
        op.f("ix_synapscale_db_workflow_execution_metrics_node_execution_id"),
        table_name="workflow_execution_metrics",
        schema="synapscale_db",
    )
    op.drop_index(
        op.f("ix_synapscale_db_workflow_execution_metrics_metric_type"),
        table_name="workflow_execution_metrics",
        schema="synapscale_db",
    )
    op.drop_index(
        op.f("ix_synapscale_db_workflow_execution_metrics_metric_name"),
        table_name="workflow_execution_metrics",
        schema="synapscale_db",
    )
    op.drop_index(
        op.f("ix_synapscale_db_workflow_execution_metrics_measured_at"),
        table_name="workflow_execution_metrics",
        schema="synapscale_db",
    )
    op.drop_index(
        op.f("ix_synapscale_db_workflow_execution_metrics_id"),
        table_name="workflow_execution_metrics",
        schema="synapscale_db",
    )
    op.drop_index(
        op.f("ix_synapscale_db_workflow_execution_metrics_context"),
        table_name="workflow_execution_metrics",
        schema="synapscale_db",
    )
    op.drop_table("workflow_execution_metrics", schema="synapscale_db")
    op.drop_index(
        op.f("ix_synapscale_db_workflow_connections_workflow_id"),
        table_name="workflow_connections",
        schema="synapscale_db",
    )
    op.drop_table("workflow_connections", schema="synapscale_db")
    op.drop_index(
        op.f("ix_synapscale_db_template_usage_workflow_id"),
        table_name="template_usage",
        schema="synapscale_db",
    )
    op.drop_index(
        op.f("ix_synapscale_db_template_usage_user_id"),
        table_name="template_usage",
        schema="synapscale_db",
    )
    op.drop_index(
        op.f("ix_synapscale_db_template_usage_used_at"),
        table_name="template_usage",
        schema="synapscale_db",
    )
    op.drop_index(
        op.f("ix_synapscale_db_template_usage_template_id"),
        table_name="template_usage",
        schema="synapscale_db",
    )
    op.drop_index(
        op.f("ix_synapscale_db_template_usage_id"),
        table_name="template_usage",
        schema="synapscale_db",
    )
    op.drop_table("template_usage", schema="synapscale_db")
    op.drop_index(
        op.f("ix_synapscale_db_template_reviews_user_id"),
        table_name="template_reviews",
        schema="synapscale_db",
    )
    op.drop_index(
        op.f("ix_synapscale_db_template_reviews_template_id"),
        table_name="template_reviews",
        schema="synapscale_db",
    )
    op.drop_index(
        op.f("ix_synapscale_db_template_reviews_id"),
        table_name="template_reviews",
        schema="synapscale_db",
    )
    op.drop_table("template_reviews", schema="synapscale_db")
    op.drop_index(
        op.f("ix_synapscale_db_template_favorites_user_id"),
        table_name="template_favorites",
        schema="synapscale_db",
    )
    op.drop_index(
        op.f("ix_synapscale_db_template_favorites_template_id"),
        table_name="template_favorites",
        schema="synapscale_db",
    )
    op.drop_index(
        op.f("ix_synapscale_db_template_favorites_id"),
        table_name="template_favorites",
        schema="synapscale_db",
    )
    op.drop_table("template_favorites", schema="synapscale_db")
    op.drop_index(
        op.f("ix_synapscale_db_template_downloads_user_id"),
        table_name="template_downloads",
        schema="synapscale_db",
    )
    op.drop_index(
        op.f("ix_synapscale_db_template_downloads_template_id"),
        table_name="template_downloads",
        schema="synapscale_db",
    )
    op.drop_index(
        op.f("ix_synapscale_db_template_downloads_id"),
        table_name="template_downloads",
        schema="synapscale_db",
    )
    op.drop_index(
        op.f("ix_synapscale_db_template_downloads_downloaded_at"),
        table_name="template_downloads",
        schema="synapscale_db",
    )
    op.drop_table("template_downloads", schema="synapscale_db")
    op.drop_index(
        op.f("ix_synapscale_db_project_versions_user_id"),
        table_name="project_versions",
        schema="synapscale_db",
    )
    op.drop_index(
        op.f("ix_synapscale_db_project_versions_project_id"),
        table_name="project_versions",
        schema="synapscale_db",
    )
    op.drop_table("project_versions", schema="synapscale_db")
    op.drop_index(
        op.f("ix_synapscale_db_project_comments_user_id"),
        table_name="project_comments",
        schema="synapscale_db",
    )
    op.drop_index(
        op.f("ix_synapscale_db_project_comments_project_id"),
        table_name="project_comments",
        schema="synapscale_db",
    )
    op.drop_index(
        op.f("ix_synapscale_db_project_comments_parent_id"),
        table_name="project_comments",
        schema="synapscale_db",
    )
    op.drop_table("project_comments", schema="synapscale_db")
    op.drop_index(
        op.f("ix_synapscale_db_project_collaborators_user_id"),
        table_name="project_collaborators",
        schema="synapscale_db",
    )
    op.drop_index(
        op.f("ix_synapscale_db_project_collaborators_project_id"),
        table_name="project_collaborators",
        schema="synapscale_db",
    )
    op.drop_table("project_collaborators", schema="synapscale_db")
    op.drop_index(
        op.f("ix_synapscale_db_node_executions_workflow_execution_id"),
        table_name="node_executions",
        schema="synapscale_db",
    )
    op.drop_index(
        op.f("ix_synapscale_db_node_executions_status"),
        table_name="node_executions",
        schema="synapscale_db",
    )
    op.drop_index(
        op.f("ix_synapscale_db_node_executions_node_type"),
        table_name="node_executions",
        schema="synapscale_db",
    )
    op.drop_index(
        op.f("ix_synapscale_db_node_executions_node_key"),
        table_name="node_executions",
        schema="synapscale_db",
    )
    op.drop_index(
        op.f("ix_synapscale_db_node_executions_node_id"),
        table_name="node_executions",
        schema="synapscale_db",
    )
    op.drop_index(
        op.f("ix_synapscale_db_node_executions_id"),
        table_name="node_executions",
        schema="synapscale_db",
    )
    op.drop_index(
        op.f("ix_synapscale_db_node_executions_execution_order"),
        table_name="node_executions",
        schema="synapscale_db",
    )
    op.drop_index(
        op.f("ix_synapscale_db_node_executions_execution_id"),
        table_name="node_executions",
        schema="synapscale_db",
    )
    op.drop_table("node_executions", schema="synapscale_db")
    op.drop_table("llms_messages", schema="synapscale_db")
    op.drop_index(
        op.f("ix_synapscale_db_workflow_execution_queue_workflow_execution_id"),
        table_name="workflow_execution_queue",
        schema="synapscale_db",
    )
    op.drop_index(
        op.f("ix_synapscale_db_workflow_execution_queue_worker_id"),
        table_name="workflow_execution_queue",
        schema="synapscale_db",
    )
    op.drop_index(
        op.f("ix_synapscale_db_workflow_execution_queue_user_id"),
        table_name="workflow_execution_queue",
        schema="synapscale_db",
    )
    op.drop_index(
        op.f("ix_synapscale_db_workflow_execution_queue_status"),
        table_name="workflow_execution_queue",
        schema="synapscale_db",
    )
    op.drop_index(
        op.f("ix_synapscale_db_workflow_execution_queue_scheduled_at"),
        table_name="workflow_execution_queue",
        schema="synapscale_db",
    )
    op.drop_index(
        op.f("ix_synapscale_db_workflow_execution_queue_queue_id"),
        table_name="workflow_execution_queue",
        schema="synapscale_db",
    )
    op.drop_index(
        op.f("ix_synapscale_db_workflow_execution_queue_priority"),
        table_name="workflow_execution_queue",
        schema="synapscale_db",
    )
    op.drop_index(
        op.f("ix_synapscale_db_workflow_execution_queue_id"),
        table_name="workflow_execution_queue",
        schema="synapscale_db",
    )
    op.drop_table("workflow_execution_queue", schema="synapscale_db")
    op.drop_index(
        op.f("ix_synapscale_db_analytics_events_workspace_id"),
        table_name="analytics_events",
        schema="synapscale_db",
    )
    op.drop_index(
        op.f("ix_synapscale_db_analytics_events_workflow_id"),
        table_name="analytics_events",
        schema="synapscale_db",
    )
    op.drop_index(
        op.f("ix_synapscale_db_analytics_events_project_id"),
        table_name="analytics_events",
        schema="synapscale_db",
    )
    op.drop_index(
        op.f("ix_synapscale_db_analytics_events_label"),
        table_name="analytics_events",
        schema="synapscale_db",
    )
    op.drop_index(
        op.f("ix_synapscale_db_analytics_events_event_id"),
        table_name="analytics_events",
        schema="synapscale_db",
    )
    op.drop_index(
        op.f("ix_synapscale_db_analytics_events_category"),
        table_name="analytics_events",
        schema="synapscale_db",
    )
    op.drop_index(
        op.f("ix_synapscale_db_analytics_events_anonymous_id"),
        table_name="analytics_events",
        schema="synapscale_db",
    )
    op.drop_index(
        op.f("ix_synapscale_db_analytics_events_action"),
        table_name="analytics_events",
        schema="synapscale_db",
    )
    op.drop_table("analytics_events", schema="synapscale_db")
    op.drop_index(
        op.f("ix_synapscale_db_workspace_projects_workspace_id"),
        table_name="workspace_projects",
        schema="synapscale_db",
    )
    op.drop_index(
        op.f("ix_synapscale_db_workspace_projects_workflow_id"),
        table_name="workspace_projects",
        schema="synapscale_db",
    )
    op.drop_table("workspace_projects", schema="synapscale_db")
    op.drop_index(
        op.f("ix_synapscale_db_workflow_templates_status"),
        table_name="workflow_templates",
        schema="synapscale_db",
    )
    op.drop_index(
        op.f("ix_synapscale_db_workflow_templates_published_at"),
        table_name="workflow_templates",
        schema="synapscale_db",
    )
    op.drop_index(
        op.f("ix_synapscale_db_workflow_templates_original_workflow_id"),
        table_name="workflow_templates",
        schema="synapscale_db",
    )
    op.drop_index(
        op.f("ix_synapscale_db_workflow_templates_license_type"),
        table_name="workflow_templates",
        schema="synapscale_db",
    )
    op.drop_index(
        op.f("ix_synapscale_db_workflow_templates_is_verified"),
        table_name="workflow_templates",
        schema="synapscale_db",
    )
    op.drop_index(
        op.f("ix_synapscale_db_workflow_templates_download_count"),
        table_name="workflow_templates",
        schema="synapscale_db",
    )
    op.drop_table("workflow_templates", schema="synapscale_db")
    op.drop_index(
        op.f("ix_synapscale_db_workflow_nodes_workflow_id"),
        table_name="workflow_nodes",
        schema="synapscale_db",
    )
    op.drop_index(
        op.f("ix_synapscale_db_workflow_nodes_node_id"),
        table_name="workflow_nodes",
        schema="synapscale_db",
    )
    op.drop_table("workflow_nodes", schema="synapscale_db")
    op.drop_index(
        op.f("ix_synapscale_db_workflow_executions_user_id"),
        table_name="workflow_executions",
        schema="synapscale_db",
    )
    op.drop_index(
        op.f("ix_synapscale_db_workflow_executions_priority"),
        table_name="workflow_executions",
        schema="synapscale_db",
    )
    op.drop_index(
        op.f("ix_synapscale_db_workflow_executions_execution_id"),
        table_name="workflow_executions",
        schema="synapscale_db",
    )
    op.drop_table("workflow_executions", schema="synapscale_db")
    op.drop_index(
        op.f("ix_synapscale_db_report_executions_user_id"),
        table_name="report_executions",
        schema="synapscale_db",
    )
    op.drop_index(
        op.f("ix_synapscale_db_report_executions_report_id"),
        table_name="report_executions",
        schema="synapscale_db",
    )
    op.drop_table("report_executions", schema="synapscale_db")
    op.drop_table("llms_conversations", schema="synapscale_db")
    op.drop_index(
        op.f("ix_synapscale_db_workspace_members_workspace_id"),
        table_name="workspace_members",
        schema="synapscale_db",
    )
    op.drop_index(
        op.f("ix_synapscale_db_workspace_members_user_id"),
        table_name="workspace_members",
        schema="synapscale_db",
    )
    op.drop_index(
        op.f("ix_synapscale_db_workspace_members_id"),
        table_name="workspace_members",
        schema="synapscale_db",
    )
    op.drop_table("workspace_members", schema="synapscale_db")
    op.drop_index(
        op.f("ix_synapscale_db_workspace_invitations_workspace_id"),
        table_name="workspace_invitations",
        schema="synapscale_db",
    )
    op.drop_index(
        op.f("ix_synapscale_db_workspace_invitations_token"),
        table_name="workspace_invitations",
        schema="synapscale_db",
    )
    op.drop_index(
        op.f("ix_synapscale_db_workspace_invitations_inviter_id"),
        table_name="workspace_invitations",
        schema="synapscale_db",
    )
    op.drop_index(
        op.f("ix_synapscale_db_workspace_invitations_invited_user_id"),
        table_name="workspace_invitations",
        schema="synapscale_db",
    )
    op.drop_index(
        op.f("ix_synapscale_db_workspace_invitations_email"),
        table_name="workspace_invitations",
        schema="synapscale_db",
    )
    op.drop_table("workspace_invitations", schema="synapscale_db")
    op.drop_index(
        op.f("ix_synapscale_db_workspace_activities_workspace_id"),
        table_name="workspace_activities",
        schema="synapscale_db",
    )
    op.drop_index(
        op.f("ix_synapscale_db_workspace_activities_user_id"),
        table_name="workspace_activities",
        schema="synapscale_db",
    )
    op.drop_index(
        op.f("ix_synapscale_db_workspace_activities_action"),
        table_name="workspace_activities",
        schema="synapscale_db",
    )
    op.drop_table("workspace_activities", schema="synapscale_db")
    op.drop_index(
        op.f("ix_synapscale_db_workflows_workspace_id"),
        table_name="workflows",
        schema="synapscale_db",
    )
    op.drop_table("workflows", schema="synapscale_db")
    op.drop_index(
        op.f("ix_synapscale_db_nodes_workspace_id"),
        table_name="nodes",
        schema="synapscale_db",
    )
    op.drop_index(
        op.f("ix_synapscale_db_nodes_user_id"),
        table_name="nodes",
        schema="synapscale_db",
    )
    op.drop_table("nodes", schema="synapscale_db")
    op.drop_index(
        op.f("ix_synapscale_db_custom_reports_workspace_id"),
        table_name="custom_reports",
        schema="synapscale_db",
    )
    op.drop_index(
        op.f("ix_synapscale_db_custom_reports_user_id"),
        table_name="custom_reports",
        schema="synapscale_db",
    )
    op.drop_index(
        op.f("ix_synapscale_db_custom_reports_category"),
        table_name="custom_reports",
        schema="synapscale_db",
    )
    op.drop_table("custom_reports", schema="synapscale_db")
    op.drop_index(
        op.f("ix_synapscale_db_component_versions_component_id"),
        table_name="component_versions",
        schema="synapscale_db",
    )
    op.drop_table("component_versions", schema="synapscale_db")
    op.drop_index(
        op.f("ix_synapscale_db_component_ratings_user_id"),
        table_name="component_ratings",
        schema="synapscale_db",
    )
    op.drop_index(
        op.f("ix_synapscale_db_component_ratings_component_id"),
        table_name="component_ratings",
        schema="synapscale_db",
    )
    op.drop_table("component_ratings", schema="synapscale_db")
    op.drop_index(
        op.f("ix_synapscale_db_component_purchases_user_id"),
        table_name="component_purchases",
        schema="synapscale_db",
    )
    op.drop_index(
        op.f("ix_synapscale_db_component_purchases_component_id"),
        table_name="component_purchases",
        schema="synapscale_db",
    )
    op.drop_table("component_purchases", schema="synapscale_db")
    op.drop_index(
        op.f("ix_synapscale_db_component_downloads_user_id"),
        table_name="component_downloads",
        schema="synapscale_db",
    )
    op.drop_index(
        op.f("ix_synapscale_db_component_downloads_component_id"),
        table_name="component_downloads",
        schema="synapscale_db",
    )
    op.drop_table("component_downloads", schema="synapscale_db")
    op.drop_index(
        op.f("ix_synapscale_db_analytics_dashboards_workspace_id"),
        table_name="analytics_dashboards",
        schema="synapscale_db",
    )
    op.drop_index(
        op.f("ix_synapscale_db_analytics_dashboards_user_id"),
        table_name="analytics_dashboards",
        schema="synapscale_db",
    )
    op.drop_table("analytics_dashboards", schema="synapscale_db")
    op.drop_index(
        op.f("ix_synapscale_db_agents_workspace_id"),
        table_name="agents",
        schema="synapscale_db",
    )
    op.drop_table("agents", schema="synapscale_db")
    op.drop_index(
        op.f("ix_synapscale_db_refresh_tokens_user_id"),
        table_name="refresh_tokens",
        schema="synapscale_db",
    )
    op.drop_index(
        op.f("ix_synapscale_db_refresh_tokens_token"),
        table_name="refresh_tokens",
        schema="synapscale_db",
    )
    op.drop_table("refresh_tokens", schema="synapscale_db")
    op.drop_index(
        op.f("ix_synapscale_db_workspaces_slug"),
        table_name="workspaces",
        schema="synapscale_db",
    )
    op.drop_table("workspaces", schema="synapscale_db")
    op.drop_table("user_variables", schema="synapscale_db")
    op.drop_index(
        op.f("ix_synapscale_db_user_insights_user_id"),
        table_name="user_insights",
        schema="synapscale_db",
    )
    op.drop_index(
        op.f("ix_synapscale_db_user_insights_insight_type"),
        table_name="user_insights",
        schema="synapscale_db",
    )
    op.drop_index(
        op.f("ix_synapscale_db_user_insights_category"),
        table_name="user_insights",
        schema="synapscale_db",
    )
    op.drop_table("user_insights", schema="synapscale_db")
    op.drop_index(
        op.f("ix_synapscale_db_user_behavior_metrics_user_id"),
        table_name="user_behavior_metrics",
        schema="synapscale_db",
    )
    op.drop_index(
        op.f("ix_synapscale_db_user_behavior_metrics_date"),
        table_name="user_behavior_metrics",
        schema="synapscale_db",
    )
    op.drop_table("user_behavior_metrics", schema="synapscale_db")
    op.drop_index(
        op.f("ix_synapscale_db_template_collections_id"),
        table_name="template_collections",
        schema="synapscale_db",
    )
    op.drop_index(
        op.f("ix_synapscale_db_template_collections_creator_id"),
        table_name="template_collections",
        schema="synapscale_db",
    )
    op.drop_index(
        op.f("ix_synapscale_db_template_collections_collection_id"),
        table_name="template_collections",
        schema="synapscale_db",
    )
    op.drop_table("template_collections", schema="synapscale_db")
    op.drop_index(
        op.f("ix_synapscale_db_marketplace_components_subcategory"),
        table_name="marketplace_components",
        schema="synapscale_db",
    )
    op.drop_table("marketplace_components", schema="synapscale_db")
    op.drop_index("idx_file_filename", table_name="files", schema="synapscale_db")
    op.drop_index("idx_file_created_at", table_name="files", schema="synapscale_db")
    op.drop_table("files", schema="synapscale_db")
    op.drop_table("analytics_reports", schema="synapscale_db")
    op.drop_table("analytics_exports", schema="synapscale_db")
    op.drop_table("analytics_alerts", schema="synapscale_db")
    op.drop_index(
        op.f("ix_synapscale_db_users_username"),
        table_name="users",
        schema="synapscale_db",
    )
    op.drop_index(
        op.f("ix_synapscale_db_users_email"), table_name="users", schema="synapscale_db"
    )
    op.drop_table("users", schema="synapscale_db")
    op.drop_index(
        op.f("ix_synapscale_db_password_reset_tokens_user_id"),
        table_name="password_reset_tokens",
        schema="synapscale_db",
    )
    op.drop_index(
        op.f("ix_synapscale_db_password_reset_tokens_token"),
        table_name="password_reset_tokens",
        schema="synapscale_db",
    )
    op.drop_table("password_reset_tokens", schema="synapscale_db")
    op.drop_index(
        op.f("ix_synapscale_db_email_verification_tokens_user_id"),
        table_name="email_verification_tokens",
        schema="synapscale_db",
    )
    op.drop_index(
        op.f("ix_synapscale_db_email_verification_tokens_token"),
        table_name="email_verification_tokens",
        schema="synapscale_db",
    )
    op.drop_table("email_verification_tokens", schema="synapscale_db")
    op.drop_index(
        op.f("ix_synapscale_db_system_performance_metrics_timestamp"),
        table_name="system_performance_metrics",
        schema="synapscale_db",
    )
    op.drop_index(
        op.f("ix_synapscale_db_system_performance_metrics_service"),
        table_name="system_performance_metrics",
        schema="synapscale_db",
    )
    op.drop_index(
        op.f("ix_synapscale_db_system_performance_metrics_metric_name"),
        table_name="system_performance_metrics",
        schema="synapscale_db",
    )
    op.drop_index(
        op.f("ix_synapscale_db_system_performance_metrics_id"),
        table_name="system_performance_metrics",
        schema="synapscale_db",
    )
    op.drop_table("system_performance_metrics", schema="synapscale_db")
    op.drop_table("node_templates", schema="synapscale_db")
    op.drop_table("node_categories", schema="synapscale_db")
    op.drop_index(
        op.f("ix_synapscale_db_business_metrics_id"),
        table_name="business_metrics",
        schema="synapscale_db",
    )
    op.drop_index(
        op.f("ix_synapscale_db_business_metrics_date"),
        table_name="business_metrics",
        schema="synapscale_db",
    )
    op.drop_table("business_metrics", schema="synapscale_db")
    op.drop_table("analytics_metrics", schema="synapscale_db")
    # ### end Alembic commands ###
