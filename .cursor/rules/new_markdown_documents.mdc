---
description: "Regras para gerenciamento de documenta√ß√µes markdown"
globs: ["**/*.md", "**/*.mdc"]
alwaysApply: true
---
# üìù REGRA CR√çTICA - GERENCIAMENTO DE DOCUMENTA√á√ïES MARKDOWN

## **üö® REGRA ABSOLUTA: REUTILIZAR ANTES DE CRIAR**

**CONTEXTO**: O reposit√≥rio est√° sendo polu√≠do com documenta√ß√µes markdown duplicadas e abandonadas. Precisamos manter organiza√ß√£o e reutilizar conte√∫do existente para evitar informa√ß√µes contradit√≥rias e confus√£o.

**‚ùå PROIBIDO:**
- Criar novos arquivos .md sem verificar se j√° existe documenta√ß√£o similar
- Deixar documenta√ß√µes na raiz do reposit√≥rio quando podem estar em `docs/`
- Abandonar documenta√ß√µes ap√≥s uso sem limpeza ou consolida√ß√£o
- Duplicar informa√ß√µes em novos arquivos markdown
- Criar documenta√ß√µes pontuais sem plano de consolida√ß√£o/limpeza

**‚úÖ OBRIGAT√ìRIO:**

## 1. **VERIFICA√á√ÉO ANTES DE CRIAR**
```bash
# ‚úÖ SEMPRE verificar documenta√ß√µes existentes primeiro
ls -la *.md | grep -E "(README|GUIDE|MANUAL|DOCS|SETUP|CONFIG|API|TUTORIAL)"
find docs/ -name "*.md" | grep -i "similar_topic"
find . -name "*.md" -exec grep -l "keyword_related" {} \;
```

## 2. **PRIORIDADE DE REUTILIZA√á√ÉO**
```markdown
<!-- ‚úÖ SEMPRE otimizar documenta√ß√µes existentes ao inv√©s de criar novas -->
<!-- Exemplo: Se existe API_GUIDE.md, EDITAR ele para adicionar novos endpoints -->
<!-- ao inv√©s de criar ENDPOINTS_DOCUMENTATION.md -->

‚ùå ERRADO: Criar nova documenta√ß√£o
create_file("NEW_API_GUIDE.md", content="# Nova documenta√ß√£o...")

‚úÖ CORRETO: Otimizar existente
edit_file("docs/API_GUIDE.md", 
          old_str="## Existing Endpoints", 
          new_str="## Existing Endpoints\n\n## New Endpoints\n- Nova se√ß√£o aqui")
```

## 3. **ORGANIZA√á√ÉO OBRIGAT√ìRIA**

```text
‚úÖ ESTRUTURA CORRETA:
docs/
‚îú‚îÄ‚îÄ api/                     # Documenta√ß√£o de APIs
‚îú‚îÄ‚îÄ setup/                   # Guias de instala√ß√£o/configura√ß√£o
‚îú‚îÄ‚îÄ guides/                  # Tutoriais e guias
‚îú‚îÄ‚îÄ architecture/            # Documenta√ß√£o de arquitetura
‚îú‚îÄ‚îÄ deployment/              # Guias de deploy
‚îú‚îÄ‚îÄ troubleshooting/         # Resolu√ß√£o de problemas
‚îú‚îÄ‚îÄ reports/                 # Relat√≥rios e an√°lises
‚îî‚îÄ‚îÄ temp/                    # Documenta√ß√µes tempor√°rias

‚ùå EVITAR NA RAIZ:
‚îú‚îÄ‚îÄ SETUP_GUIDE.md          # Deve estar em docs/setup/
‚îú‚îÄ‚îÄ API_DOCUMENTATION.md    # Deve estar em docs/api/
‚îú‚îÄ‚îÄ TROUBLESHOOTING.md      # Deve estar em docs/troubleshooting/
‚îú‚îÄ‚îÄ DEPLOYMENT_*.md         # Deve estar em docs/deployment/
‚îú‚îÄ‚îÄ *_ANALYSIS_*.md         # Deve estar em docs/reports/
```

## 4. **DOCUMENTA√á√ïES PONTUAIS - CONSOLIDA√á√ÉO OBRIGAT√ìRIA**
```markdown
<!-- ‚úÖ Para documenta√ß√µes tempor√°rias/pontuais: -->

<!-- 1. Criar em local adequado -->
docs/temp/temp_migration_guide_20250107.md

<!-- 2. Usar com cabe√ßalho claro -->
# DOCUMENTA√á√ÉO TEMPOR√ÅRIA - CONSOLIDAR AP√ìS USO
**Criado:** 2025-01-07  
**Prop√≥sito:** Guia pontual de migra√ß√£o de dados  
**Consolidar em:** docs/setup/migration.md ap√≥s valida√ß√£o  
**Deletar ap√≥s:** Consolida√ß√£o completa

<!-- 3. SEMPRE consolidar ou deletar ap√≥s uso -->
<!-- TODO: Consolidar este conte√∫do em documenta√ß√£o definitiva ‚úÖ -->
```

## 5. **WORKFLOW OBRIGAT√ìRIO**
```bash
# ‚úÖ Antes de criar qualquer documenta√ß√£o markdown:

# 1. Verificar se existe similar
echo "üîç Verificando documenta√ß√µes existentes..."
find . -name "*.md" -type f | grep -E "(README|GUIDE|MANUAL|DOCS|SETUP|CONFIG|API)" | head -15

# 2. Se existe similar, EDITAR ao inv√©s de criar novo
echo "‚úèÔ∏è Editando documenta√ß√£o existente ao inv√©s de criar nova..."

# 3. Se n√£o existe, criar em local correto
echo "üìÅ Criando em docs/categoria_adequada/"

# 4. Para docs pontuais, adicionar cabe√ßalho de consolida√ß√£o
echo "üóÇÔ∏è Adicionando TODO para consolida√ß√£o posterior..."

# 5. Ap√≥s uso, SEMPRE consolidar ou limpar
echo "‚úÖ Consolidando documenta√ß√µes tempor√°rias..."
```

## 6. **DOCUMENTA√á√ïES PERMITIDAS NA RAIZ (APENAS)**

```markdown
# ‚úÖ √öNICAS documenta√ß√µes permitidas na raiz (casos excepcionais):
ALLOWED_ROOT_DOCS = [
    "README.md",             # Apresenta√ß√£o principal do projeto
    "LICENSE",               # Licen√ßa do projeto
    "CHANGELOG.md",          # Hist√≥rico de mudan√ßas
    "CONTRIBUTING.md",       # Guia de contribui√ß√£o
    "SECURITY.md",           # Pol√≠ticas de seguran√ßa
    ".cursorrules",          # Regras do Cursor
    "AGENTS.md",             # Configura√ß√£o de agentes (se aplic√°vel)
    "CLAUDE.md",             # Documenta√ß√£o espec√≠fica do Claude
    "VALIDATION_REPORT.md",  # Relat√≥rios de valida√ß√£o (apenas tempor√°rios)
    "FINAL_VALIDATION_REPORT.md" # Relat√≥rios finais (apenas tempor√°rios)
]

# ‚ùå Qualquer outra documenta√ß√£o DEVE estar em docs/
# ‚ö†Ô∏è  Relat√≥rios tempor√°rios devem ser movidos para docs/reports/ ap√≥s consolida√ß√£o
```

## 7. **VERIFICA√á√ÉO PR√â-COMMIT**
```bash
# ‚úÖ Checklist obrigat√≥rio antes de commit:
echo "üìã Verifica√ß√µes de documenta√ß√£o:"
echo "- [ ] N√£o criei documenta√ß√£o duplicada quando j√° existia similar?"
echo "- [ ] Documenta√ß√µes est√£o em docs/ e n√£o na raiz?"
echo "- [ ] Docs pontuais t√™m TODO para consolida√ß√£o?"
echo "- [ ] Reutilizei conte√∫do existente ao m√°ximo?"
echo "- [ ] Documenta√ß√µes tempor√°rias foram consolidadas ap√≥s uso?"
echo "- [ ] N√£o h√° informa√ß√µes contradit√≥rias entre documentos?"
```

## 8. **PENALIDADES POR VIOLA√á√ÉO**
- **1¬™ viola√ß√£o**: Refatorar/consolidar imediatamente
- **2¬™ viola√ß√£o**: Revisar toda estrutura de documenta√ß√£o
- **3¬™ viola√ß√£o**: Reorganiza√ß√£o completa do reposit√≥rio

## **üéØ REGRA DE OURO:**
> "Se existe similar, EDITE. Se n√£o existe, crie em docs/. Se √© pontual, CONSOLIDE ap√≥s uso."

## 9. **EXEMPLOS PR√ÅTICOS**

### ‚úÖ CORRETO - Reutilizando documenta√ß√£o existente
```markdown
# Cen√°rio: Preciso documentar novas configura√ß√µes
# Encontrei: docs/setup/configuration.md

# Ao inv√©s de criar novo, EDITO o existente:
edit_file("docs/setup/configuration.md",
    old_str="## Database Configuration",
    new_str="""## Database Configuration
<!-- conte√∫do existente... -->

## Redis Configuration
- REDIS_URL: URL de conex√£o com Redis
- REDIS_TTL: Tempo de vida do cache (padr√£o: 300s)
""")
```

### ‚ùå INCORRETO - Criando desnecessariamente
```markdown
# ‚ùå N√ÉO FAZER: Criar REDIS_CONFIG.md quando j√° existe configuration.md
create_file("REDIS_CONFIG.md", content="# duplicando informa√ß√µes...")
```

### ‚úÖ CORRETO - Documenta√ß√£o pontual com consolida√ß√£o
```markdown
# Documenta√ß√£o para an√°lise espec√≠fica e tempor√°ria
create_file("docs/temp/performance_analysis_2025_01_07.md", 
    content="""
# DOCUMENTA√á√ÉO TEMPOR√ÅRIA - CONSOLIDAR AP√ìS 2025-01-07
**An√°lise pontual de performance dos endpoints**  
**TODO:** Consolidar resultados em docs/troubleshooting/performance.md
""")

# Ap√≥s an√°lise:
# 1. Extrair insights importantes
# 2. Consolidar em documenta√ß√£o definitiva
# 3. Deletar tempor√°ria
```

### ‚úÖ CORRETO - Consolida√ß√£o de m√∫ltiplas documenta√ß√µes
```markdown
# Se existem: API_ENDPOINTS.md, ENDPOINTS_GUIDE.md, API_REFERENCE.md
# Consolidar em: docs/api/endpoints.md

# 1. Criar estrutura unificada
# 2. Mover conte√∫do n√£o duplicado
# 3. Remover arquivos redundantes
# 4. Atualizar refer√™ncias
```

## 10. **COMANDOS √öTEIS PARA VERIFICA√á√ÉO**

```bash
# Listar todas as documenta√ß√µes na raiz (para limpeza)
ls -la *.md | grep -vE "^(README|LICENSE|CHANGELOG|CONTRIBUTING|SECURITY)\.md$"

# Encontrar documenta√ß√µes similares por conte√∫do
find . -name "*.md" -exec grep -l "similar_topic" {} \;

# Verificar estrutura de docs/
tree docs/ -I "*.tmp"

# Contar documenta√ß√µes duplicadas/similares
find . -name "*API*.md" -o -name "*GUIDE*.md" -o -name "*SETUP*.md" | wc -l

# Buscar documenta√ß√µes √≥rf√£s (n√£o referenciadas)
grep -r "\.md" --include="*.md" docs/ | cut -d: -f2 | sort | uniq

# Verificar links quebrados em documenta√ß√µes
find docs/ -name "*.md" -exec grep -H "\[.*\](.*)" {} \;

# Identificar documenta√ß√µes √≥rf√£s na raiz que deveriam estar em docs/
find . -maxdepth 1 -name "*.md" -type f | grep -vE "^./(README|LICENSE|CHANGELOG|CONTRIBUTING|SECURITY|AGENTS|CLAUDE|.*VALIDATION.*REPORT)\.md$"
```

## 11. **PADR√ïES DE NOMENCLATURA**

### ‚úÖ NOMENCLATURA CORRETA
```
docs/
‚îú‚îÄ‚îÄ api/
‚îÇ   ‚îú‚îÄ‚îÄ endpoints.md         # N√£o "API_ENDPOINTS.md"
‚îÇ   ‚îú‚îÄ‚îÄ authentication.md   # N√£o "AUTH_GUIDE.md"
‚îÇ   ‚îî‚îÄ‚îÄ rate-limiting.md     # Usar kebab-case
‚îú‚îÄ‚îÄ setup/
‚îÇ   ‚îú‚îÄ‚îÄ installation.md     # N√£o "INSTALL_GUIDE.md"
‚îÇ   ‚îú‚îÄ‚îÄ configuration.md    # N√£o "CONFIG_SETUP.md"
‚îÇ   ‚îî‚îÄ‚îÄ database-setup.md   # Espec√≠fico e claro
‚îî‚îÄ‚îÄ guides/
    ‚îú‚îÄ‚îÄ getting-started.md   # N√£o "QUICK_START.md"
    ‚îú‚îÄ‚îÄ best-practices.md    # N√£o "CODING_STANDARDS.md"
    ‚îî‚îÄ‚îÄ troubleshooting.md   # N√£o "ERROR_FIXES.md"
```

### ‚ùå NOMENCLATURA INCORRETA
```
# Evitar nomes gen√©ricos ou redundantes:
- DOCUMENTATION.md          # Muito gen√©rico
- NEW_FEATURES.md          # Deve estar em CHANGELOG.md
- IMPORTANT_NOTES.md       # Deve ser espec√≠fico
- TEMP_GUIDE.md           # Usar conven√ß√£o de tempor√°rios
- BACKUP_API_DOCS.md      # N√£o deixar backups no repo
```

## 12. **TEMPLATE PARA NOVAS DOCUMENTA√á√ïES**

```markdown
# [Nome Espec√≠fico da Documenta√ß√£o]

## Vis√£o Geral
Breve descri√ß√£o do que esta documenta√ß√£o cobre.

## Pr√©-requisitos
- Item 1
- Item 2

## Se√ß√µes Principais
### Se√ß√£o 1
Conte√∫do...

### Se√ß√£o 2
Conte√∫do...

## Refer√™ncias
- [Documenta√ß√£o relacionada](link)
- [API Reference](link)

## √öltima Atualiza√ß√£o
**Data:** 2025-01-07  
**Respons√°vel:** [Nome]  
**Pr√≥xima Revis√£o:** [Data]
```

## **üîÑ PROCESSO DE MANUTEN√á√ÉO**

```bash
# Revis√£o mensal de documenta√ß√µes
# 1. Verificar docs √≥rf√£s
find docs/ -name "*.md" -atime +30

# 2. Consolidar tempor√°rias
find docs/temp/ -name "*.md" -mtime +7

# 3. Atualizar refer√™ncias
grep -r "TODO.*consolidar" docs/

# 4. Verificar consist√™ncia
# Executar verifica√ß√£o de links e refer√™ncias cruzadas
```

## 13. **PROCESSO DE LIMPEZA AUTOM√ÅTICA**

```bash
# Script de limpeza semanal recomendado
#!/bin/bash

echo "üßπ Iniciando limpeza de documenta√ß√µes..."

# 1. Identificar documenta√ß√µes √≥rf√£s na raiz
echo "üìã Documenta√ß√µes √≥rf√£s na raiz:"
find . -maxdepth 1 -name "*.md" -type f | grep -vE "^./(README|LICENSE|CHANGELOG|CONTRIBUTING|SECURITY|AGENTS|CLAUDE|.*VALIDATION.*REPORT)\.md$"

# 2. Listar documenta√ß√µes tempor√°rias antigas
echo "‚è∞ Documenta√ß√µes tempor√°rias antigas (>7 dias):"
find docs/temp/ -name "*.md" -mtime +7 2>/dev/null || echo "Pasta docs/temp/ n√£o existe"

# 3. Verificar relat√≥rios que devem ser movidos
echo "üìä Relat√≥rios na raiz que devem ser movidos para docs/reports/:"
find . -maxdepth 1 -name "*REPORT*.md" -o -name "*ANALYSIS*.md" -o -name "*SUMMARY*.md" 2>/dev/null

# 4. Verificar duplica√ß√µes
echo "üîç Poss√≠veis duplica√ß√µes de conte√∫do:"
find docs/ -name "*.md" -exec basename {} \; | sort | uniq -c | grep -v "1 "

# 5. Sugerir consolida√ß√µes
echo "üí° Sugest√µes de consolida√ß√£o dispon√≠veis em .cursor/rules/new_markdown_documents.mdc"
```
